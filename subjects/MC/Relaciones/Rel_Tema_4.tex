\newpage
\section{Gramáticas Independientes del Contexto}

\begin{observacion}
    Salvo que se indique lo contrario, las letras en mayúsculas representan variables, las letras en minúsculas representan terminales y la $S$ representa el símbolo inicial.
\end{observacion}

\begin{ejercicio}\label{ej:1.4.1}
    Determinar si la siguiente gramática es ambigua y si el lenguaje generado es inherentemente ambiguo:
    \begin{equation*}
        \left\{
            \begin{aligned}
                S &\rightarrow A_1 \mid A_2 \\
                A_1 &\rightarrow aA_1b \mid aA_1 \mid \veps \\
                A_2 &\rightarrow aA_2b \mid A_2b \mid \veps
            \end{aligned}
        \right.
    \end{equation*}

    La gramática dada es ambigua puesto que hay palabras con más de un árbol de derivación. Por ejemplo, la palabra $aab$ tiene los dos posibles árboles de derivación que se muestran en la Figura~\ref{fig:1.4.1}.
    \begin{figure}
        \centering
        \begin{forest}
            for tree={
                edge={-}, % Hace que las líneas no terminen en punta
                fit=rectangle, % Ajusta el tamaño del rectángulo al texto
            }
            [$S$
                [$A_1$
                    [$a$]
                    [$A_1$
                        [$a$]
                        [$A_1$
                            [$\veps$]
                        ]
                    ]
                    [$b$]
                ]
            ]
        \end{forest}
        \hspace{2cm}
        \begin{forest}
            for tree={
                edge={-}, % Hace que las líneas no terminen en punta
                fit=rectangle, % Ajusta el tamaño del rectángulo al texto
            }
            [$S$
                [$A_1$
                    [$a$]
                    [$A_1$
                        [$a$]
                        [$A_1$
                            [$\veps$]
                        ]
                        [$b$]
                    ]
                ]
            ]
        \end{forest}
        \caption{Árboles de derivación para $aab$ usando la Gramática del Ejercicio~\ref{ej:1.4.1}.}
        \label{fig:1.4.1}
    \end{figure}

    Veamos ahora que no es inherentemente ambiguo. La producción de $A_1$ produce las palabras de la forma $a^i b^j$, con $i \geq j$. La producción de $A_2$ produce las palabras de la forma $a^i b^j$, con $i \leq j$. Por tanto, la gramática genera el lenguaje:
    \begin{align*}
        L &= \{ a^i b^j \mid i,j\in \bb{N}\cup \{0\},\ i \geq j\}\cup \{ a^i b^j \mid i,j\in \bb{N}\cup \{0\},\ i \leq j\} =\\&= \{ a^i b^j \mid i,j\in \bb{N}\cup \{0\} \}
    \end{align*}

    Este lenguaje es regular con expresión regular asociada:
    \begin{equation*}
        a^*b^*
    \end{equation*}
    Por tanto, como es regular, tenemos que no es inherentemente ambiguo.
\end{ejercicio}

\begin{ejercicio}\label{ej:1.4.2}
    Sea la gramática
    \begin{equation*}
        \left\{
            \begin{aligned}
                S &\rightarrow aSA \mid \veps \\
                A &\rightarrow bA\mid \veps
            \end{aligned}
        \right.
    \end{equation*}
    \begin{enumerate}
        \item Demostrar que es ambigua.
        
        Tomemos como palabra $aabb$. Esta palabra tiene dos árboles de derivación, como se muestra en la Figura~\ref{fig:1.4.2}.
        \begin{figure}
            \centering
            \begin{forest}
                for tree={
                    edge={-}, % Hace que las líneas no terminen en punta
                    fit=rectangle, % Ajusta el tamaño del rectángulo al texto
                }
                [$S$
                    [$a$]
                    [$S$
                        [$a$]
                        [$S$
                            [$\veps$]
                        ]
                        [$A$
                            [$b$]
                            [$A$
                                [$b$]
                                [$A$
                                    [$\veps$]
                                ]
                            ]
                        ]
                    ]
                    [$A$
                        [$\veps$]
                    ]
                ]
            \end{forest}
            \hspace{2cm}
            \begin{forest}
                for tree={
                    edge={-}, % Hace que las líneas no terminen en punta
                    fit=rectangle, % Ajusta el tamaño del rectángulo al texto
                }
                [$S$
                    [$a$]
                    [$S$
                        [$a$]
                        [$S$
                            [$\veps$]
                        ]
                        [$A$
                            [$b$]
                            [$A$
                                [$\veps$]
                            ]
                        ]
                    ]
                    [$A$
                        [$b$]
                        [$A$
                            [$\veps$]
                        ]
                    ]
                ]
            \end{forest}
            \caption{Árboles de derivación para $aabb$ usando la Gramática del Ejercicio~\ref{ej:1.4.2}.}
            \label{fig:1.4.2}
        \end{figure}
        \item Dar una expresión regular para el lenguaje generado.
        
        En primer lugar, hemos de considerar que $\veps\in L$. Además, todas las palabras de longitud positiva empiezan por $a$. por tanto, la expresión regular para el lenguaje generado por la gramática es:
        \begin{equation*}
            a^+b^*+\veps
        \end{equation*}
        \item Construir una gramática no ambigua que genere el mismo lenguaje.
        
        Una primera opción sería obtener el autómata y pasar este a gramática. No obstante, consideramos directamente la gramática $G=(V,\{a,b\},P,S)$, con:
        \begin{equation*}
            \begin{aligned}
                V &= \{ S, A, B \} \\
                P &= \left\{
                    \begin{aligned}
                        S &\rightarrow aA \mid \veps\\
                        A &\rightarrow aA \mid B\\
                        B &\rightarrow bB \mid \veps
                    \end{aligned}
                \right.
            \end{aligned}
        \end{equation*}

        Veamos ahora que esta gramática no es ambigua. Sea $z\in L$.
        \begin{itemize}
            \item Si $z=\veps$, entonces la única derivación posible es $S\Rightarrow \veps$.
            \item Si $z\neq \veps$, entonces $z=a^ib^j$, con $i,j\in \bb{N}\cup \{0\}$, $i\geq 1$.
            Para obtener la primera $i$ (ya que $i\geq 1$) hemos de usar la producción $S\rightarrow aA$. A partir de aquí, hemos de usar la producción $A\rightarrow aA$ $i-1$ veces. Por último, hemos de usar la producción $A\rightarrow B$ para producir las $b$'s y la producción $B\rightarrow bB$ $j$ veces. Por último, hemos de usar la producción $B\rightarrow \veps$ para terminar. Por tanto, la única derivación posible es:
            \begin{equation*}
                S\Rightarrow aA\Rightarrow aaA\Rightarrow \ldots \Rightarrow a^{i}A\Rightarrow a^{i}B\Rightarrow a^{i}bB\Rightarrow \ldots \Rightarrow a^{i}b^jB\Rightarrow a^{i}b^j
            \end{equation*}
        \end{itemize}
    \end{enumerate}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.4.3}
    Considera la gramática $G = (V, T, S, P)$ donde
    \begin{equation*}
        \begin{aligned}
            V &= \{ \langle \text{expresión} \rangle, \langle \text{identificador} \rangle \} \\
            T &= \{ a, b, c, d, - \} \\
            S &= \langle \text{expresión} \rangle \\
            P &= \left\{
                \begin{aligned}
                    \langle \text{expresión} \rangle &\rightarrow \langle \text{identificador} \rangle \\
                    \langle \text{expresión} \rangle &\rightarrow \langle \text{identificador} \rangle - \langle \text{expresión} \rangle \\
                    \langle \text{expresión} \rangle &\rightarrow \langle \text{expresión} \rangle - \langle \text{identificador} \rangle \\
                    \langle \text{identificador} \rangle &\rightarrow a \mid b \mid c \mid d
                \end{aligned}
            \right.
        \end{aligned}
    \end{equation*}
    \begin{enumerate}
        \item Demuestra que esta gramática no puede ser empleada para describir un posible lenguaje de programación, teniendo en cuenta que la sustración no es una operación conmutativa, y que $(a - b) - d \neq a - (b - d)$.
        
        El lenguaje generado tiene como expresión regular:
        \begin{equation*}
            (a+b+c+d)\left(-(a+b+c+d)\right)^*
        \end{equation*}

        Por tanto, debido a que no tenemos paréntesis, en el lenguaje de programación no podríamos obtener el resultado de $a-(b-d)$.

        \item ¿Es ambigua la gramática $G$? ¿Es la ambigüedad inherente al lenguaje generado por $G$? Justifica adecuadamente la respuesta.
        
        Para ver si la gramática es ambigua, consideramos la palabra $a-b$. Esta palabra tiene dos árboles de derivación, como se muestra en la Figura~\ref{fig:1.4.3}.
        \begin{figure}
            \centering
            \begin{forest}
                for tree={
                    edge={-}, % Hace que las líneas no terminen en punta
                    fit=rectangle, % Ajusta el tamaño del rectángulo al texto
                }
                [$\langle \text{expresión} \rangle$
                    [$\langle \text{identificador} \rangle$
                        [$a$]
                    ]
                    [$-$]
                    [$\langle \text{expresión} \rangle$
                        [$\langle \text{identificador} \rangle$
                            [$b$]
                        ]
                    ]
                ]
            \end{forest}
            \hspace{0.2cm}
            \begin{forest}
                for tree={
                    edge={-}, % Hace que las líneas no terminen en punta
                    fit=rectangle, % Ajusta el tamaño del rectángulo al texto
                }
                [$\langle \text{expresión} \rangle$
                    [$\langle \text{expresión} \rangle$
                        [$\langle \text{identificador} \rangle$
                            [$a$]
                        ]
                    ]
                    [$-$]
                    [$\langle \text{identificador} \rangle$
                        [$b$]
                    ]
                ]
            \end{forest}
            \caption{Árboles de derivación para $a-b$ usando la Gramática del Ejercicio~\ref{ej:1.4.3}.}
            \label{fig:1.4.3}
        \end{figure}

        La ambiguedad no es adherente al lenguaje generado por la gramática, ya que este lenguaje es regular. Por tanto, el lenguaje no es inherentemente ambiguo.
        Una gramática que no sea ambigua y que genere el mismo lenguaje es $G=(V,\{a,b,c,d,-\},P,S)$, con:
        \begin{equation*}
            \begin{aligned}
                V &= \{ S, I \} \\
                P &= \left\{
                    \begin{aligned}
                        I\rightarrow &a \mid b \mid c \mid d \\
                        S\rightarrow &I \mid I-S
                    \end{aligned}
                \right.
            \end{aligned}
        \end{equation*}
        \item ¿Es posible modificar $G$ de manera que la nueva gramática pueda ser usada para generar el lenguaje de las expresiones aritméticas correctas con el operador de resta?
        
        Sí, podemos añadir paréntesis a la gramática para que sea capaz de generar el lenguaje de las expresiones aritméticas correctas con el operador de resta. La gramática modificada sería $G=(V,\{a,b,c,d,-,(,)\},P,S)$, con:
        \begin{equation*}
            \begin{aligned}
                V &= \{ S, I \} \\
                P &= \left\{
                    \begin{aligned}
                        I\rightarrow &a \mid b \mid c \mid d \\
                        S\rightarrow &I \mid (I-S)
                    \end{aligned}
                \right.
            \end{aligned}
        \end{equation*}
    \end{enumerate}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.4.4}
    Dada la gramática
    \begin{equation*}
        \left\{
            \begin{aligned}
                S &\rightarrow A \mid B \\
                A &\rightarrow aaA \mid \veps \\
                B &\rightarrow aaaB \mid \veps
            \end{aligned}
        \right.
    \end{equation*}
    \begin{enumerate}
        \item Demostrar que es ambigua.
        
        La variable $A$ genera palabras de la forma $a^{2i}$ y la variable $B$ genera palabras de la forma $a^{3i}$. Por tanto, la palabras de la forma $a^{6i}$ tienen dos árboles de derivación, como se muestra en la Figura~\ref{fig:1.4.4}.
        \begin{figure}
            \centering
            \begin{forest}
                for tree={
                    edge={-}, % Hace que las líneas no terminen en punta
                    fit=rectangle, % Ajusta el tamaño del rectángulo al texto
                }
                [$S$
                    [$A$
                        [$a$]
                        [$a$]
                        [$A$
                            [$a$]
                            [$a$]
                            [$A$
                                [$a$]
                                [$a$]
                                [$A$
                                    [$\veps$]
                                ]
                            ]
                        ]
                    ]
                ]
            \end{forest}
            \hspace{2cm}
            \begin{forest}
                for tree={
                    edge={-}, % Hace que las líneas no terminen en punta
                    fit=rectangle, % Ajusta el tamaño del rectángulo al texto
                }
                [$S$
                    [$B$
                        [$a$]
                        [$a$]
                        [$a$]
                        [$B$
                            [$a$]
                            [$a$]
                            [$a$]
                            [$B$
                                [$\veps$]
                            ]
                        ]
                    ]
                ]
            \end{forest}
            \caption{Árboles de derivación para $a^6$ usando la Gramática del Ejercicio~\ref{ej:1.4.4}.}
            \label{fig:1.4.4}
        \end{figure}
        \item Construir un autómata finito determinístico que acepte el mismo lenguaje.
        
        El autómata que genera las palabras de la forma $a^{2i}$ es el que se muestra en la Figura~\ref{fig:1.4.4.AFD1},
        mientras que el autómata que genera las palabras de la forma $a^{3i}$ es el que se muestra en la Figura~\ref{fig:1.4.4.AFD2}.
        El autómata producto es el que se muestra en la Figura~\ref{fig:1.4.4.AFD3}.
        \begin{figure}
            \centering
            \begin{tikzpicture}
                \node[state,initial, accepting] (q0) {$q_0$};
                \node[state] (q1) [right of=q0] {$q_1$};

                \draw   (q0) edge[above] node{$a$} (q1)
                        (q1) edge[above, bend right] node{$a$} (q0);
            \end{tikzpicture}
            \caption{AFD que acepta el lenguaje de la variable $A$ de la Gramática del Ejercicio~\ref{ej:1.4.4}.}
            \label{fig:1.4.4.AFD1}
        \end{figure}
        \begin{figure}
            \centering
            \begin{tikzpicture}
                \node[state,initial, accepting] (q0) {$p_0$};
                \node[state] (q1) [right of=q0] {$p_1$};
                \node[state] (q2) [right of=q1] {$p_2$};

                \draw   (q0) edge[above] node{$a$} (q1)
                        (q1) edge[above] node{$a$} (q2)
                        (q2) edge[above, bend right] node{$a$} (q0);
            \end{tikzpicture}
            \caption{AFD que acepta el lenguaje de la variable $B$ de la Gramática del Ejercicio~\ref{ej:1.4.4}.}
            \label{fig:1.4.4.AFD2}
        \end{figure}
        \begin{figure}
            \centering
            \begin{tikzpicture}
                \node[state,initial, accepting] (q0p0) {$q_0p_0$};
                \node[state] (q1p1) [right of=q0p0] {$q_1p_1$};
                \node[state, accepting] (q0p2) [right of=q1p1] {$q_0p_2$};
                \node[state, accepting] (q1p0) [below of=q0p2] {$q_1p_0$};
                \node[state, accepting] (q0p1) [left of=q1p0] {$q_0p_1$};
                \node[state] (q1p2) [below of=q0p0] {$q_1p_2$};

                \draw   (q0p0) edge[above] node{$a$} (q1p1)
                        (q0p1) edge[above] node{$a$} (q1p2)
                        (q0p2) edge[right] node{$a$} (q1p0)
                        (q1p0) edge[above] node{$a$} (q0p1)
                        (q1p1) edge[above] node{$a$} (q0p2)
                        (q1p2) edge[left] node{$a$} (q0p0);
            \end{tikzpicture}
            \caption{AFD que acepta el lenguaje de la Gramática del Ejercicio~\ref{ej:1.4.4}.}
            \label{fig:1.4.4.AFD3}
        \end{figure}
        \item Construir una gramática lineal por la derecha, a partir del autómata determinístico, que genere el mismo lenguaje.
        
        La gramática lineal por la derecha que genera el lenguaje del autómata de la Figura~\ref{fig:1.4.4.AFD3} es
        $G=(V,\{a\},P,S)$, con:
        \begin{equation*}
            \begin{aligned}
                V &= \{ q_0p_0, q_1p_1, q_0p_2, q_1p_0, q_0p_1, q_1p_2 \} \\
                P &= \left\{
                    \begin{aligned}
                        q_0p_0 &\rightarrow aq_1p_1 \mid \veps \\
                        q_1p_1 &\rightarrow aq_0p_2 \\
                        q_0p_2 &\rightarrow aq_1p_0 \mid \veps \\
                        q_1p_0 &\rightarrow aq_0p_1 \mid \veps \\
                        q_0p_1 &\rightarrow aq_1p_2 \mid \veps \\
                        q_1p_2 &\rightarrow aq_0p_0
                    \end{aligned}
                \right.
            \end{aligned}
        \end{equation*}
        \item Demostrar que la gramática resultante no es ambigua.
        
        Como el autómata del que proviene es determinista, la gramática obtenida no es ambigua; ya que para cada estado y símbolo solo hay un posible estado al que ir.
    \end{enumerate}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.4.5}
    Dar una gramática libre de contexto no ambigua que genere el lenguaje
    \begin{equation*}
        L = \{ a^i b^j a^k b^l \mid (i = j) \lor (k = l) \}
    \end{equation*}
    
    Este ejercicio no es tan directo y requiere explicación. La idea es expresar $L$ como unión de tres lenguajes disjuntos:
    \begin{enumerate}
        \item $L_1 = \{ a^i b^j a^k b^l \mid i,j\in \bb{N}\cup \{0\},~k,l\in \bb{N}\setminus \{0\},
        i = j \land k \neq l \}$
        \item $L_2 = \{ a^i b^j a^k b^l \mid i,j,k,l\in \bb{N}\setminus \{0\},
        i \neq j \land k = l \}$
        \item $L_3 = \{ a^i b^j a^k b^l \mid i,j,k,l\in \bb{N}\setminus \{0\},
        i = j \land k = l \} \cup \{\veps\}$.
    \end{enumerate}
    
    Vemos de forma directa que $L_1=\bigcup\limits_{i=1}^3 L_i$. Veamos ahora que $\bigcap\limits_{i=1}^3 L_i = \emptyset$. Sea $z=a^ib^ja^kb^l\in L$. Si todos los exponentes son distintos de $0$, entonces vemos de forma directa que tan solo puede pertenecer a uno de los $L_i$. Si $z=\veps$, tan solo puede pertenecer a $L_3$. Por último, tan solo queda contemplar que la palabra sea de la forma $a^pb^q$. En este caso, tan solo puede pertenecer a $L_1$.\\

    Por tanto, tenemos que:
    \begin{equation*}
        \bigcup\limits_{i=1}^3 L_i = L\qquad \bigcap\limits_{i=1}^3 L_i = \emptyset
    \end{equation*}

    Damos ahora una gramática para cada uno de los lenguajes.
    \begin{enumerate}
        \item Sea $G_1=(V_1,\{a,b\},P_1,S_1)$, con:
        \begin{equation*}
            \begin{aligned}
                V_1 &= \{ S_1, A_1, B_1, B_1^a, B_2^b \} \\
                P_1 &= \left\{
                    \begin{aligned}
                        S_1 &\rightarrow A_1B_1 \\
                        A_1 &\rightarrow aA_1b \mid \veps \\
                        B_1 &\rightarrow aB_1b \mid B_1^a \mid B_2^b \\
                        B_1^a &\rightarrow aB_1^a \mid a \\
                        B_2^b &\rightarrow bB_2^b \mid b
                    \end{aligned}
                \right.
            \end{aligned}
        \end{equation*}
        Notemos que $A_1$ genera la parte de la forma $a^ib^j$ con $i,j\in \bb{N}\cup \{0\}$, $i=j$. $B_1$ inicialmente genera la parte de la palabra de la forma $a^{k'}b^{l'}$ con $k',l'\in \bb{N}\cup \{0\}$, $k'=l'$, pero necesariamente se emplea $B_1^a$ o $B_2^b$ para terminar la palabra, y estas añaden respectivamente $a$'s o $b$'s (al menos una), de forma que se fuerza a que $k,l\in \bb{N}\setminus \{0\}$, $k\neq l$.

        Además, es no ambigua puesto que la la forma de la palabra fija qué producciones hemos de emplear.

        De esta forma, $\cc{L}(G_1)=L_1$.

        \item Sea $G_2=(V_2,\{a,b\},P_2,S_2)$, con:
        \begin{equation*}
            \begin{aligned}
                V_2 &= \{ S_2, A_2, B_2, A_2^a, A_2^b \} \\
                P_2 &= \left\{
                    \begin{aligned}
                        S_2 &\rightarrow A_2B_2 \\
                        A_2 &\rightarrow aA_2b \mid A_2^a \mid A_2^b \\
                        B_2 &\rightarrow aB_2b \mid ab \\
                        A_2^a &\rightarrow aA_2^a \mid a \\
                        A_2^b &\rightarrow bA_2^b \mid b
                    \end{aligned}
                \right.
            \end{aligned}
        \end{equation*}

        La demostración de que $\cc{L}(G_2)=L_2$ es análoga a la de $G_1$. Notemos que en este caso, como la regla $B_2\rightarrow \veps$ no está presente, se fuerza a que $k,l\neq 0$.

        Además, de igual forma, se trata de una gramática no ambigua.

        Por tanto, $\cc{L}(G_2)=L_2$.

        \item Sea $G_3=(V_3,\{a,b\},P_3,S_3)$, con:
        \begin{equation*}
            \begin{aligned}
                V_3 &= \{ S_3, C_3\} \\
                P_3 &= \left\{
                    \begin{aligned}
                        S_3 &\rightarrow C_3C_3 \mid \veps \\
                        C_3 &\rightarrow aC_3b \mid ab
                    \end{aligned}
                \right.
            \end{aligned}
        \end{equation*}

        Notemos que la regla $S\rightarrow \veps$ se añade para que $\veps\in L_3$. $C_3$ genera la parte de la palabra de la forma $a^ib^i$ con $i\in \bb{N}\setminus \{0\}$, por lo que se tiene.

        Además, es no ambigua puesto que la la forma de la palabra fija qué producciones hemos de emplear.

        Por tanto, $\cc{L}(G_3)=L_3$.        
    \end{enumerate}

    Como son tres lenguajes disjuntos cuya unión es $L$, y como cada una de las gramáticas es no ambigua, tenemos que la gramática $G=(V,\{a,b\},P,S)$ es no ambigua, con:
    \begin{equation*}
        \begin{aligned}
            V &= V_1\cup V_2\cup V_3\cup \{ S \} \\
            P &= P_1\cup P_2\cup P_3\cup \left\{
                \begin{aligned}
                    S &\rightarrow S_1 \mid S_2 \mid S_3
                \end{aligned}
            \right\}
        \end{aligned}
    \end{equation*}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.4.6}
    Determinar cuales de las siguientes gramáticas son ambiguas y, en su caso, comprobar si los lenguajes generados son inherentemente ambiguos:
    \begin{enumerate}
        \item \label{ej:1.4.6.1}
        $S \rightarrow aSb \mid Sb \mid aS \mid a$
        
        La gramática dada es ambigua. Por ejemplo, la palabra $aab$ tiene dos árboles de derivación, como se muestra en la Figura~\ref{fig:1.4.6.1}.
        No obstante, este es un lenguaje regular con expresión regular asociada:
        \begin{equation*}
            aa^*b^*
        \end{equation*}
        Por tanto, el lenguaje generado no es inherentemente ambiguo.
        \begin{figure}
            \centering
            \begin{forest}
                for tree={
                    edge={-}, % Hace que las líneas no terminen en punta
                    fit=rectangle, % Ajusta el tamaño del rectángulo al texto
                }
                [$S$
                    [$a$]
                    [$S$
                        [$a$]
                    ]
                    [$b$]
                ]
            \end{forest}
            \hspace{2cm}
            \begin{forest}
                for tree={
                    edge={-}, % Hace que las líneas no terminen en punta
                    fit=rectangle, % Ajusta el tamaño del rectángulo al texto
                }
                [$S$
                    [$a$]
                    [$S$
                        [$S$
                            [$a$]
                        ]
                        [$b$]
                    ]
                ]
            \end{forest}
            \caption{Árboles de derivación para $aab$ usando la Gramática del Ejercicio~\ref{ej:1.4.6}.\ref{ej:1.4.6.1}.}
            \label{fig:1.4.6.1}
        \end{figure}
        \item \label{ej:1.4.6.2}
         $S \rightarrow aaS \mid aaaS \mid a$
        
        La gramática dada es ambigua. Por ejemplo, la palabra $a^7$ tiene dos árboles de derivación, como se muestra en la Figura~\ref{fig:1.4.6.2}.
        No obstante, este es un lenguaje regular con expresión regular asociada:
        \begin{equation*}
            (aa + aaa)^*a
        \end{equation*}
        Por tanto, el lenguaje generado no es inherentemente ambiguo.
        \begin{figure}
            \centering
            \begin{forest}
                for tree={
                    edge={-}, % Hace que las líneas no terminen en punta
                    fit=rectangle, % Ajusta el tamaño del rectángulo al texto
                }
                [$S$
                    [$a$]
                    [$a$]
                    [$S$
                        [$a$]
                        [$a$]
                        [$S$
                            [$a$]
                            [$a$]
                            [$S$
                                [$a$]
                            ]
                        ]
                    ]
                ]
            \end{forest}
            \hspace{2cm}
            \begin{forest}
                for tree={
                    edge={-}, % Hace que las líneas no terminen en punta
                    fit=rectangle, % Ajusta el tamaño del rectángulo al texto
                }
                [$S$
                    [$a$]
                    [$a$]
                    [$a$]
                    [$S$
                        [$a$]
                        [$a$]
                        [$a$]
                        [$S$
                            [$a$]
                        ]
                    ]
                ]
            \end{forest}
            \caption{Árboles de derivación para $a^7$ usando la Gramática del Ejercicio~\ref{ej:1.4.6}.\ref{ej:1.4.6.2}.}
            \label{fig:1.4.6.2}
        \end{figure}
        \item \label{ej1.4.6.3}
        $S \rightarrow aS \mid aSb \mid X$,\\ $X \rightarrow Xa \mid a$

        La gramática dada es ambigua. Por ejemplo, la palabra $a^2$ tiene dos árboles de derivación, como se muestra en la Figura~\ref{fig:1.4.6.3}.
        \begin{figure}
            \centering
            \begin{forest}
                for tree={
                    edge={-}, % Hace que las líneas no terminen en punta
                    fit=rectangle, % Ajusta el tamaño del rectángulo al texto
                }
                [$S$
                    [$a$]
                    [$S$
                        [$X$
                            [$a$]
                        ]
                    ]
                ]
            \end{forest}
            \hspace{2cm}
            \begin{forest}
                for tree={
                    edge={-}, % Hace que las líneas no terminen en punta
                    fit=rectangle, % Ajusta el tamaño del rectángulo al texto
                }
                [$S$
                    [$X$
                        [$X$
                            [$a$]
                        ]
                        [$a$]
                    ]
                ]
            \end{forest}
            \caption{Árboles de derivación para $a^2$ usando la Gramática del Ejercicio~\ref{ej:1.4.6}.\ref{ej1.4.6.3}.}
            \label{fig:1.4.6.3}
        \end{figure}

        El lenguaje generado por esta gramática es:
        \begin{equation*}
            L = \{ aa^{n+m}b^n \mid n,m\in \bb{N}\cup \{0\} \}
        \end{equation*}

        Consideramos ahora la gramática $G=(V,\{a,b\},P,S)$, con:
        \begin{equation*}
            \begin{aligned}
                V &= \{ S, A, B \} \\
                P &= \left\{
                    \begin{aligned}
                        S &\rightarrow aA \\
                        A &\rightarrow aA \mid B\\
                        B &\rightarrow aBb \mid \veps
                    \end{aligned}
                \right.
            \end{aligned}
        \end{equation*}

        Esta gramática no es ambigua. Sea $z\in L$, por lo que será de la forma $z=aa^{n+m}b^n$. Para obtener la primera $a$ hemos de usar la producción $S\rightarrow aA$. A partir de aquí, hemos de usar la producción $A\rightarrow aA$ $m$ veces. Por último, hemos de usar la producción $A\rightarrow B$ para producir las $a$'s y $b$'s y la producción $B\rightarrow aBb$ $n$ veces. Por último, hemos de usar la producción $B\rightarrow \veps$ para terminar. Por tanto, la única derivación posible es:
        \begin{equation*}
            S\Rightarrow aA\Rightarrow aaA\Rightarrow \ldots \Rightarrow aa^{m}B\Rightarrow aa^{n+m}b^nB \Rightarrow aa^{n+m}b^n
        \end{equation*}
    \end{enumerate}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.4.7}
    Dar gramáticas libres de contexto no ambiguas (cuando sea posible) para los siguientes lenguajes sobre el alfabeto $A = \{ a, b, c \}$:
    \begin{enumerate}
        \item $L_1 = \{ a^i b^j c^k \mid i \neq j \lor j \neq k \}$

        % // TODO: No hecho en clase.
        \item $L_2 = \{ (ab)^i (bc)^j \mid i, j \geq 0 \}$
        
        La gramática que genera el lenguaje $L_2$ es $G=(V,\{a,b,c\},P,S)$, con:
        \begin{equation*}
            \begin{aligned}
                V &= \{ S, X \} \\
                P &= \left\{
                    \begin{aligned}
                        S &\rightarrow abS \mid X \\
                        X &\rightarrow bcX \mid \veps
                    \end{aligned}
                \right.
            \end{aligned}
        \end{equation*}

        Esta no es ambigua. Sea $z\in L$, por lo que será de la forma $z=(ab)^i(bc)^j$. Para obtener la parte de $(ab)^i$ hemos de usar la producción $S\rightarrow abS$ $i$ veces. A partir de aquí, hemos de usar la producción $S\rightarrow X$ para producir las $b$'s y $c$'s y la producción $X\rightarrow bcX$ $j$ veces. Por último, hemos de usar la producción $X\rightarrow \veps$ para terminar. Por tanto, la única derivación posible es:
        \begin{equation*}
            S\Rightarrow abS\Rightarrow ababS\Rightarrow \ldots \Rightarrow (ab)^iX\Rightarrow (ab)^i(bc)X \Rightarrow (ab)^i(bc)^jX \Rightarrow (ab)^i(bc)^j
        \end{equation*}
        \item $L_3 = \{ a^i b^{i+j} c^j \mid i, j \geq 0 \}$
        
        La gramática que genera el lenguaje $L_3$ es $G=(V,\{a,b,c\},P,S)$, con:
        \begin{equation*}
            \begin{aligned}
                V &= \{ S, A, C \} \\
                P &= \left\{
                    \begin{aligned}
                        S &\rightarrow AC \\
                        A &\rightarrow aAb \mid \veps \\
                        C &\rightarrow bCc \mid \veps
                    \end{aligned}
                \right.
            \end{aligned}
        \end{equation*}

        Esta no es ambigua. Sea $z\in L$, por lo que será de la forma $z=a^ib^{i+j}c^j$. Para obtener la parte de $a^ib^i$ hemos de usar la producción $A\rightarrow aAb$ $i$ veces. A partir de aquí, hemos de usar la producción $A\rightarrow \veps$. Por otro lado, para obtener la parte de $b^jc^j$ hemos de usar la producción $C\rightarrow bCc$ $j$ veces. Por último, hemos de usar la producción $C\rightarrow \veps$ para terminar.
        \item $L_4$ definido como el conjunto de palabras que comienzan por $aab$ y terminan por $bbc$ y tales que estas dos subcadenas no aparecen nunca en el interior de la palabra (sólo están al principio y al final).
        
        Notemos que, como el enunciado no es totalmente preciso, consideramos $aabbc\notin L_4$.
        El AFD que acepta el lenguaje $L_4$ es el de la Figura~\ref{fig:1.4.7.L4.AFD}.
        \begin{figure}
            \centering
            \begin{tikzpicture}[node distance=2.5cm]
                \node[state,initial] (q0) {$q_0$};
                \node[state] (q1) [right of=q0] {$q_1$};
                \node[state] (q2) [right of=q1] {$q_2$};
                \node[state] (q3) [right of=q2] {$q_3$};
                \node[state] (q4) [right of=q3] {$q_4$};
                \node[state] (q5) [right of=q4] {$q_5$};
                \node[state] (q6) [right of=q5, accepting] {$q_6$};
                \node[state, error] (E) [below of=q1, yshift=-2em] {$E$};
                \node[state] (q7) [below of=q3, yshift=-2em] {$q_7$};
                \node[state] (q8) [left of=q7] {$q_8$};

                % Cadena de inicio y fin
                \draw   (q0) edge[above] node{$a$} (q1)
                        (q1) edge[above] node{$a$} (q2)
                        (q2) edge[above] node{$b$} (q3)
                        (q3) edge[above] node{$b$} (q4)
                        (q4) edge[above] node{$b$} (q5)
                        (q5) edge[above] node{$c$} (q6);

                % Completamos
                \draw   (q3) edge[loop above] node{$c$} (q3)
                        (q4) edge[below] node{$a$} (q7)
                        (q4) edge[above, bend right] node{$c$} (q3)
                        (q5) edge[below] node{$a$} (q7)
                        (q5) edge[loop above] node{$b$} (q5)
                        (q7) edge[above, bend left] node{$b$} (q4)
                        (q7) edge[left, bend left] node{$c$} (q3)
                        (q8) edge[loop above] node{$a$} (q8)
                        (q8) edge[above] node{$c$} (q3);
                
                % Cadena prohibida
                \draw   (q3) edge[left] node{$a$} (q7)
                        (q7) edge[above] node{$a$} (q8)
                        (q8) edge[above] node{$b$} (E);


                % Completamos con errores
                \draw[opacity=0.6]
                        (q0) edge[left] node{$b,c$} (E)
                        (q1) edge[above right] node{$b,c$} (E)
                        (q2) edge[right] node{$a,c$} (E)
                        (E) edge[loop below] node{$a,b,c$} (q5)
                        (q6) edge[below, bend left] node{$a,b,c$} (E);
            \end{tikzpicture}
            \caption{AFD que acepta el lenguaje $L_4$.}
            \label{fig:1.4.7.L4.AFD}
        \end{figure}

        La gramática que genera el lenguaje $L_4$ es $G=(V,\{a,b,c\},P,q_0)$, con:
        \begin{equation*}
            \begin{aligned}
                V &= \{ q_0, q_1, q_2, q_3, q_4, q_5, q_6, q_7, q_8 \} \\
                P &= \left\{
                    \begin{aligned}
                        q_0 &\rightarrow aq_1 \\
                        q_1 &\rightarrow aq_2 \\
                        q_2 &\rightarrow bq_3 \\
                        q_3 &\rightarrow aq_7 \mid bq_4 \mid cq_3 \\
                        q_4 &\rightarrow aq_7 \mid bq_5 \mid cq_3 \\
                        q_5 &\rightarrow bq_5 \mid cq_6 \mid aq_7 \\
                        q_6 &\rightarrow \veps \\
                        q_7 &\rightarrow aq_8 \mid bq_4 \mid cq_3\\
                        q_8 &\rightarrow aq_8 \mid cq_3
                    \end{aligned}
                \right.
            \end{aligned}
        \end{equation*}
        donde no hemos introducido la variable $E$ ni las producciones asociadas con ella debido a que esta variable es inútil.
        Esta gramática es no ambigua puesto que proviene de un AFD.
    \end{enumerate}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.4.8}
    Dada la gramática
    \begin{equation*}
        \left\{
            \begin{aligned}
                S &\rightarrow 01S \mid 010S \mid 101S \mid \veps
            \end{aligned}
        \right.
    \end{equation*}
    \begin{enumerate}
        \item Determinar si es ambigua.
        
        La gramática dada es ambigua. Por ejemplo, la palabra $010101$ tiene dos árboles de derivación, como se muestra en la Figura~\ref{fig:1.4.8}.
        \begin{figure}
            \centering
            \begin{forest}
                for tree={
                    edge={-}, % Hace que las líneas no terminen en punta
                    fit=rectangle, % Ajusta el tamaño del rectángulo al texto
                }
                [$S$
                    [$0$]
                    [$1$]
                    [$0$]
                    [$S$
                        [$1$]
                        [$0$]
                        [$1$]
                        [$S$
                            [$\veps$]
                        ]
                    ]
                ]
            \end{forest}
            \hspace{2cm}
            \begin{forest}
                for tree={
                    edge={-}, % Hace que las líneas no terminen en punta
                    fit=rectangle, % Ajusta el tamaño del rectángulo al texto
                }
                [$S$
                    [$0$]
                    [$1$]
                    [$S$
                        [$0$]
                        [$1$]
                        [$S$
                            [$0$]
                            [$1$]
                            [$S$
                                [$\veps$]
                            ]
                        ]
                    ]
                ]
            \end{forest}
            \caption{Árboles de derivación para $010101$ usando la Gramática del Ejercicio~\ref{ej:1.4.8}.}
            \label{fig:1.4.8}
        \end{figure}
        \item Construir un autómata finito determinista asociado.
        
        La expresión regular asociada al lenguaje generado por la gramática es:
        \begin{equation*}
            (01 + 010 + 101)^*
        \end{equation*}

        El AFND asociado es el de la Figura~\ref{fig:1.4.8.AFND}.
        \begin{figure}
            \centering
            \begin{tikzpicture}
                \node[state,initial, accepting] (q0) {$q_0$};
                \node[state] (q2) [right of=q0] {$q_2$};
                \node[state] (q3) [right of=q2] {$q_3$};
                \node[state] (q1) [above of=q2] {$q_1$};
                \node[state] (q4) [below of=q2] {$q_4$};
                \node[state] (q5) [right of=q4] {$q_5$};

                \draw   (q0) edge[above] node{$0$} (q1)
                        (q1) edge[above, bend right] node{$1$} (q0)
                        (q0) edge[above] node{$0$} (q2)
                        (q2) edge[above] node{$1$} (q3)
                        (q3) edge[above, bend right] node{$0$} (q0)
                        (q0) edge[above] node{$1$} (q4)
                        (q4) edge[above] node{$0$} (q5)
                        (q5) edge[above] node{$1$} (q0);
            \end{tikzpicture}
            \caption{AFND que acepta el lenguaje de la Gramática del Ejercicio~\ref{ej:1.4.8}.}
            \label{fig:1.4.8.AFND}
        \end{figure}

        El AFD asociado es el de la Figura~\ref{fig:1.4.8.AFD}, donde las transiciones que faltan son transiciones a un estado de error. Este no se añade para evitar confusión, y no afectará al siguiente apartado.
        \begin{figure}
            \centering
            \resizebox{1.1\textwidth}{!}{
            \begin{tikzpicture}
                \node[state,initial, accepting] (q0) {$q_0$};
                \node[state] (q1q2) [above right of=q0] {$q_1q_2$};
                \node[state] (q0q3) [right of=q1q2, accepting] {$q_0q_3$};
                \node[state] (q0q1q2) [right of=q0q3, accepting] {$q_0q_1q_2$};
                \node[state] (q0q3q4) [right of=q0q1q2, accepting] {$q_0q_3q_4$};
                \node[state] (q0q1q2q5) [right of=q0q3q4, accepting] {$q_0q_1q_2q_5$};
                \node[state] (q4) [right of=q0, xshift=5.3em] {$q_4$};
                \node[state] (q5) [right of=q4] {$q_5$};

                \draw   (q0) edge[above] node{$0$} (q1q2)
                        (q0) edge[above] node{$1$} (q4)
                        (q1q2) edge[above] node{$1$} (q0q3)
                        (q0q3) edge[above left] node{$1$} (q4)
                        (q0q3) edge[above] node{$0$} (q0q1q2)
                        (q0q1q2) edge[above, bend right] node[pos=0.2]{$0$} (q1q2)
                        (q0q1q2) edge[above] node{$1$} (q0q3q4)
                        (q0q3q4) edge[above] node{$0$} (q0q1q2q5)
                        (q0q3q4) edge[above left] node{$1$} (q4)
                        (q0q1q2q5) edge[above, bend right] node{$0$} (q1q2)
                        (q0q1q2q5) edge[above, bend right] node[pos=0.8]{$1$} (q0q3q4)
                        (q4) edge[above] node[pos=0.8]{$0$} (q5)
                        (q5) edge[below, bend left] node{$1$} (q0);
            \end{tikzpicture}}
            \caption{AFD que acepta el lenguaje de la Gramática del Ejercicio~\ref{ej:1.4.8}.}
            \label{fig:1.4.8.AFD}
        \end{figure}


        \item Calcular la gramática lineal por la derecha que se obiene a partir del autómata. ¿Es ambigua la gramática resultante?
        
        La gramática lineal por la derecha que se obtiene a partir del AFD es $G=(V,\{0,1\},P,q_0)$, con:
        \begin{equation*}
            \begin{aligned}
                V &= \{ q_0, q_1q_2, q_0q_3, q_0q_1q_2, q_0q_3q_4, q_0q_1q_2q_5, q_4, q_5 \} \\
                P &= \left\{
                    \begin{aligned}
                        q_0 & \rightarrow 0q_1q_2 \mid 1q_4 \mid \veps \\
                        q_1q_2 & \rightarrow 1q_0q_3 \\
                        q_0q_3 & \rightarrow 1q_4 \mid 0q_0q_1q_2 \mid \veps \\
                        q_0q_1q_2 & \rightarrow 0q_1q_2 \mid 1q_0q_3q_4 \mid \veps \\
                        q_0q_3q_4 & \rightarrow 0q_0q_1q_2q_5 \mid 1q_4 \mid \veps \\
                        q_0q_1q_2q_5 & \rightarrow 0q_1q_2 \mid 1q_0q_3q_4 \mid \veps \\
                        q_4 & \rightarrow 0q_5 \\
                        q_5 & \rightarrow 1q_0
                    \end{aligned}
                \right.
            \end{aligned}
        \end{equation*}
        Esta es no ambigua, puesto que proviene de un AFD.
    \end{enumerate}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.4.9}
    Considerar la siguiente gramática:
    \begin{equation*}
        \left\{
            \begin{aligned}
                S &\rightarrow A 1 B\\
                A &\rightarrow 0A \mid \veps\\
                B &\rightarrow 0B \mid 1B \mid \veps
            \end{aligned}
        \right.
    \end{equation*}
    \begin{enumerate}
        \item Demostrar que la gramática dada no es ambigua.
        
        La expresión regular asociada al lenguaje generado por la gramática es:
        \begin{equation*}
            0^*\red{1}(0+1)^*
        \end{equation*}

        La gramática dada no es ambigua. Sea $z\in L$, por lo que será de la forma $z=0^i1u$, con $i\geq 0$ y $u\in \{0,1\}^*$.
        En primer lugar, para obtener el $1$ central, hemos de usar la producción $S\rightarrow A1B$. A partir de aquí, hemos de usar la producción $A\rightarrow 0A$ $i$ veces. Después, usamos las reglas de $B$ para obtener la palabra $u$.

        \item Encontrar una gramática para el mismo lenguaje que sea ambigua y demostrar su ambigüedad.
        
        Consideramos la gramática $G=(V,\{0,1\},P,S)$, con:
        \begin{equation*}
            \begin{aligned}
                V &= \{ S, A \} \\
                P &= \left\{
                    \begin{aligned}
                        S &\rightarrow 0S\mid 1A\mid 1\\
                        A &\rightarrow 0A \mid 1A \mid \veps
                    \end{aligned}
                \right.
            \end{aligned}
        \end{equation*}

        Notemos que esta es ambigua, puesto que si consideramos la palabra $1$, esta tiene dos árboles de derivación, como se muestra en la Figura~\ref{fig:1.4.9}.
        \begin{figure}
            \centering
            \begin{forest}
                for tree={
                    edge={-}, % Hace que las líneas no terminen en punta
                    fit=rectangle, % Ajusta el tamaño del rectángulo al texto
                }
                [$S$
                    [$1$]
                ]
            \end{forest}
            \hspace{2cm}
            \begin{forest}
                for tree={
                    edge={-}, % Hace que las líneas no terminen en punta
                    fit=rectangle, % Ajusta el tamaño del rectángulo al texto
                }
                [$S$
                    [$1$]
                    [$A$
                        [$\veps$]
                    ]
                ]
            \end{forest}
            \caption{Árboles de derivación para $1$ usando la Gramática del Ejercicio~\ref{ej:1.4.9}.}
            \label{fig:1.4.9}
        \end{figure}
        Notemos que si quitamos la regla $S\rightarrow 1$, la gramática no sería ambigua y generaría el mismo lenguaje que la gramática original.
    \end{enumerate}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.4.10}
    Describe el lenguaje que es generado por la siguiente gramática $G=(\{ S, A \}, \{ a, b \}, P, S)$, con
    \begin{equation*}
        P = \left\{
            \begin{aligned}
                S &\rightarrow aAa \mid bAa\\
                A &\rightarrow aAa \mid bAa \mid \veps
            \end{aligned}
        \right.
    \end{equation*}
    \begin{enumerate}
        \item Demuestra que el lenguaje generado por la gramática no es regular, pero sí independiente del contexto.\\
        
        Tenemos que es independiente del conexto, pero no sabemos si es regular o no. Para demostrar que no es regular, usamos el Lema de Bombeo.
        Para cada $n\in \bb{N}$, consideramos la palabra $z=b^{n+1}a^{n+1}$, con $|z|=2n+2\geq n$. Entonces, para toda descompisición $z=uvw$ con $u,v,w\in \{a,b\}^*$, $|uv|\leq n$ y $|v|\geq 1$ se tiene que:
        \begin{equation*}
            u=b^k,\quad v=b^l,\quad w=b^{n+1-k-l}a^{n+1} \quad \text{con } 0\leq k+l\leq n,~l\geq 1
        \end{equation*}

        Entonces, para $i=2$, tenemos que $uv^2w=b^{k+2l+n+1-k-l}a^{n+1}=b^{n+l+1}a^{n+1}$. Veamos que $uv^2w\notin L$.
        Como empieza por $b$, hemos de comenzar con la regla de producción $S\rightarrow bAa$. Por tanto, para que $uv^2w\in L$, hemos de obtener $b^{n+l}a^{n}$ a partir de $A$, pero esto no es posible puesto que, a partir de $A$ y conteniendo a $b$, solo podemos obtener palabras de la forma $b^ia^{i}$. Como $n+l\neq n$ por ser $l\geq 1$, tenemos que $uv^2w\notin L$. Por tanto, por el recíproco del Lema de Bombeo, $L$ no es regular.
        \item Normaliza la gramática $G$ en la Forma Normal de Greibach, y determina todas las derivaciones más a la izquierda para la cadena $ab^2a^5$.
        
        En primer lugar, vemos que todas las producciones son útiles. Buscamos ahora eliminar las producciones nulas. Para esto, vemos que la única producción variable anulable es $A$. Eliminando las producciones nulas, obtenemos las siguientes reglas de producción:
        \begin{equation*}
            P = \left\{
                \begin{aligned}
                    S &\rightarrow aAa \mid bAa \mid aa \mid ba\\
                    A &\rightarrow aAa \mid bAa \mid aa \mid ba
                \end{aligned}
            \right.
        \end{equation*}

        Para que esté en forma normal de Greibach, necesitamos que todas las reglas sean de la forma $A\to a\alpha$, con $a\in T$, $\alpha\in V^*$. Por tanto, las producciones resultantes para que esté en forma normal de Greibach son:
        \begin{equation*}
            P = \left\{
                \begin{aligned}
                    S &\rightarrow aAC_a \mid bAC_a \mid aC_a \mid bC_a\\
                    A &\rightarrow aAC_a \mid bAC_a \mid aC_a \mid bC_a\\
                    C_a & \rightarrow a\\
                \end{aligned}
            \right.
        \end{equation*}

        Esta gramática, efectivamente, esta en forma normal de Greibach. Para la cadena $ab^2a^5$, las derivaciones más a la izquierda son:
        \begin{equation*}
            S \Rightarrow aAC_a \Rightarrow abAC_aC_a \Rightarrow abbAC_aC_aC_a \Rightarrow abbaC_aC_aC_aC_a \Rightarrow abbaC_aC_aC_aC_a \Rightarrow ab^2a^5
        \end{equation*}
        % // TODO: Se refiere a esto?
    \end{enumerate}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.4.11}
    Obtener la forma normal de Greibach para la siguiente gramática:
    \begin{equation*}
        G=\left\{ \{ S_1, S_2, S_3 \}, \{ a, b, c, d, e \}, S_1, P \right\}
    \end{equation*}
    donde:
    \begin{equation*}
        P = \left\{
            \begin{aligned}
                S_1 &\rightarrow S_1 S_2 c \mid S_3 \mid S_3 b S_3\\
                S_2 &\rightarrow S_1 S_1 \mid d\\
                S_3 &\rightarrow S_2 e
            \end{aligned}
        \right.
    \end{equation*}
    % // TODO: Por aqui?
    
\end{ejercicio}

\begin{ejercicio}\label{ej:1.4.12}
    Pasar a forma normal de Greibach la gramática
    \begin{equation*}
        \left\{
            \begin{aligned}
                S &\rightarrow AAA \mid B\\
                A &\rightarrow aA \mid B\\
                B &\rightarrow \veps
            \end{aligned}
        \right.
    \end{equation*}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.4.13}
    Determina si los siguientes lenguajes son regulares o independientes del contexto. Encuentra una gramática que los genere.
    \begin{enumerate}
        \item $L_1 = \{ a^i b^j c^k \mid i, j \geq 0, k < i + j \}$
        \item $L_2 = \{ (ab)^i c^j d \mid j = i - 1, i \geq 1 \}$
        \item $L_3 = \{ ab^i cd^j \mid j = 2 \cdot i, 1 \leq i \leq 10 \}$
    \end{enumerate}
    Elige una de ellas que sea independiente del contexto y pásala a forma normal de Chomsky.
\end{ejercicio}

\begin{ejercicio}\label{ej:1.4.14}
    Dadas las siguientes gramáticas determinar si son ambiguas y, en caso de que lo sean, determinar una gramática no ambigua que genere el mismo lenguaje
    \begin{enumerate}
        \item $E \rightarrow E + E \mid E * E \mid (E) \mid x \mid y$ (alfabeto de símbolos terminales $\{ x, y, +, *, (, ) \}$ y símbolo inicial $E$).
        \item $S \rightarrow SS + \mid SS * \mid x \mid y$ (alfabeto de símbolos terminales $\{ x, y, +, * \}$ y símbolo inicial $S$)
    \end{enumerate}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.4.15}
    Una gramática independiente del contexto generalizada es una gramática en el que las producciones son de la forma $A \rightarrow r$ donde $r$ es una expresión regular de variables y símbolos terminales. Una gramática independiente del contexto generalizada representa una forma compacta de representar una gramática con todas las producciones $A \rightarrow \alpha$, donde $\alpha$ es una palabra del lenguaje asociado a la expresión regular $r$ y $A \rightarrow r$ es una producción de la gramática generalizada. Observemos que esta gramática asociada puede tener infinitas producciones, ya que una expresión regular puede representar un lenguaje con infinitas palabras. El concepto de lenguaje generado por una gramática generalizada se define de forma análoga al de las gramáticas independientes del contexto, pero teniendo en cuenta que ahora puede haber infinitas producciones. Demostrar que un lenguaje es independiente del contexto si y solo si se puede generar por una gramática generalizada.
\end{ejercicio}

\begin{ejercicio}\label{ej:1.4.16}
    Demostrar que los siguientes lenguajes son independientes del contexto:
    \begin{enumerate}
        \item $L_1 = \{ u \# w \mid u^{-1} \text{ es una subcadena de } w, u, w \in \{ 0, 1 \}^* \}$
        \item $L_2 = \{ u_1 \# u_2 \# \ldots \# u_k \mid k \geq 1, \text{ cada } u_i \in \{ 0, 1 \}^*, \text{ y para algún } i \text{ y } j, u_i = u_j^{-1} \}$
    \end{enumerate}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.4.17}
    Sobre el alfabeto $\{ 0, 1 \}$ dar una gramática no ambigua que genere todas las palabras en las que el número de $0$s es el doble que el de $1$s.
\end{ejercicio}

\begin{ejercicio}\label{ej:1.4.18}
    Sea el lenguaje $L = \{ 0^i 1^k 0^j \mid i \neq j, 2i \neq j \}$. Demostrar que $L$ es independiente del contexto.
\end{ejercicio}

\begin{ejercicio}\label{ej:1.4.19}
    Demostrar que si una gramática $G$ está en forma normal de Chomsky, entonces si $w \in L(G)$ el número de pasos de derivación de toda generación de esta palabra es $2|w| - 1$.
\end{ejercicio}

\begin{ejercicio}\label{ej:1.4.20}
    Dar gramáticas independientes del contexto no ambiguas para los siguientes lenguajes sobre el alfabeto $\{ 0, 1 \}$:
    \begin{enumerate}
        \item El conjunto de palabras $w$ tal que en todo prefijo de $w$ el número de $0$s es mayor o igual que el número de $1$s.
        \item El conjunto de palabras $w$ en las que el número de $0$s es mayor o igual que el número de $1$s.
    \end{enumerate}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.4.21}
    Sea $L = \{ 0^i 1^j 0^k \mid i \neq j, 2i \neq j \}$. Demostrar que $L$ es independiente del contexto.
\end{ejercicio}

\begin{ejercicio}\label{ej:1.4.22}
    Supongamos el conjunto de símbolos terminales $T = \{ \text{if}, \text{condicion}, \text{then}, \text{else}, a := 1 \}$, el alfabeto de variables $V = \{ \langle \text{SENT} \rangle, \langle \text{IF - THEN} \rangle, \langle \text{IF - THEN - ELSE} \rangle, \langle \text{ASIG} \rangle \}$, y las producciones:
    \begin{equation*}
        \left\{
            \begin{aligned}
                \langle \text{SENT} \rangle &\rightarrow \langle \text{ASIG} \rangle \mid \langle \text{IF - THEN} \rangle \mid \langle \text{IF - THEN - ELSE} \rangle\\
                \langle \text{IF - THEN} \rangle &\rightarrow \text{if condicion then} \langle \text{SENT} \rangle\\
                \langle \text{IF - THEN - ELSE} \rangle &\rightarrow \text{if condicion then} \langle \text{SENT} \rangle \text{else} \langle \text{SENT} \rangle\\
                \langle \text{ASIG} \rangle &\rightarrow \text{a := 1}
            \end{aligned}
        \right.
    \end{equation*}
    Suponiendo que el símbolo inicial es $\langle \text{SENT} \rangle$, demostrar que la gramática es ambigua. Dar una gramática no ambigua que genere el mismo lenguaje.
\end{ejercicio}

\subsection{Preguntas Tipo Test}
Se pide discutir la veracidad o falsedad de las siguientes afirmaciones:
\begin{enumerate}
    \item Si un lenguaje de tipo 2 viene generado por una gramática ambigua, siempre puedo encontrar una gramática no ambigua que genere el mismo lenguaje.
    \item En una gramática de tipo 2 ambigua no puede existir una palabra generada con un único árbol de derivación.
    \item Dada una gramática independiente del contexto, siempre se puede construir una gramática sin transiciones nulas ni unitarias que genere exactamente el mismo lenguaje que la gramática original.
    \item Una gramática independiente del contexto es ambigua si existe una palabra que puede ser generada con dos cadenas de derivación distintas.  
    \item Un lenguaje inherentemente ambiguo puede ser generado por una gramática ambigua.
    \item El lenguaje de las palabras sobre $\{0,1\}$ con un número impar de ceros es independiente del contexto.
    \item Si en una producción de una gramática independiente del contexto, uno de los símbolos que contiene es útil, entonces la producción es útil.
    \item Todo árbol de derivación de una palabra en una gramática independiente del contexto está asociado a una única derivación por la izquierda.
    \item Para poder aplicar el algoritmo que hemos visto para transformar una gramática a forma normal de Greibach, la gramática tiene que estar en forma normal de Chomsky necesariamente.
    \item Sólo hay una derivación por la derecha asociada a un árbol de derivación.
    \item Si una gramática independiente del contexto no tiene producciones nulas ni unitarias, entonces si $u$ es una palabra de longitud $n$ generada por la gramática, su derivación se obtiene en un número de pasos no superior a $2n-1$.
    \item Cada árbol de derivación de una palabra en una gramática de tipo 2, tiene asociada una única derivación por la izquierda de la misma.
    \item Existe un lenguaje con un número finito de palabras que no puede ser generado por una gramática libre de contexto.
    \item La gramática compuesta por las reglas de producción $S\rightarrow AA$, $A\rightarrow aSa$, $A\rightarrow a$ no es ambigua.
    \item Para poder aplicar el algoritmo que transforma una gramática en forma normal de Greibach es necesario que la gramática esté en forma normal de Chomsky.
    \item Un lenguaje libre de contexto es inherentemente ambiguo si existe una gramática ambigua que lo genera.
    \item La gramática compuesta por las reglas de producción $S\rightarrow A$, $A\rightarrow aSa$, $A\rightarrow a$ es ambigua.
    \item Para generar una palabra de longitud $n$ en una gramática en forma normal de Chomsky hacen falta exactamente $2n-1$ pasos de derivación.
    \item Es imposible que una gramática esté en forma normal de Chomsky y Greibach al mismo tiempo.
    \item En una gramática independiente del contexto, si una palabra de longitud $n$ es generada, entonces el número de pasos de derivación que se emplean debe de ser menor o igual a $2n-1$.
    \item El algoritmo que pasa una gramática a forma normal de Greibach produce siempre el mismo resultado con independencia de cómo se numeren las variables.
    \item La gramática compuesta por la siguientes reglas de producción \newline $\{S\rightarrow A\ |\ BA\ |\ SS,\ B\rightarrow a\ |\ b,\ A\rightarrow a\}$ es ambigua.
    \item Si una palabra de longitud $n$ es generada por una gramática en forma normal de Greibach, entonces lo es con $n$ pasos de derivación exactamente.
    \item En una gramática independiente del contexto puede existir una palabra que es generada con dos derivaciones por la izquierda distintas que tienen el mismo árbol de derivación.
    \item Una gramática independiente del contexto genera un lenguaje que puede ser representado por una expresión regular.
    \item Para cada autómata finito no determinista $M$ existe una gramática independiente de contexto $G$ tal que $L(M) = L(G)$ .
    \item Para que un autómata con pila sea determinista es necesario que no tenga transiciones nulas.
    \item El algoritmo que pasa una gramatica a forma normal de Greibach produce siempre el mismo resultado con independencia de cómo se numeren las variables.
    \item El conjunto de cadenas generado por una gramática independiente del contexto en forma normal de Greibach puede ser reconocido por un autómata finito no determinista con transiciones nulas.
    \item La intersección de dos lenguajes regulares da lugar a un lenguaje independiente del contexto.
    \item Si $L_1$ y $L_2$ son independientes del contexto, no podemos asegurar que $L_1 \cap L_2$ también lo sea.
\end{enumerate}
