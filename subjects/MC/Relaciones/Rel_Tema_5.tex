\section{Autómatas con Pila}

\begin{ejercicio}\label{ej:1.5.1}
    Determinar una gramática que acepte el lenguaje $N(M)$ por el criterio de pila vacía, donde,
    \begin{equation*}
        M = \{\{q_0, q_1\}, \{a,b\}, \{Z_0,X\},\delta,q_0,Z_0,\emptyset \}
    \end{equation*}
    y donde
    \begin{align*}
        \delta(q_0,a,Z_0) &= \{(q_0, XZ_0)\} \\
        \delta(q_0,a,X) &= \{(q_0, XX),(q_1,\veps)\} \\
        \delta(q_0,b,Z_0) &= \{(q_0, XZ_0)\} \\
        \delta(q_0,b,X) &= \{(q_0, XX)\} \\
        \delta(q_1,a,X) &= \{(q_1, \veps)\} \\
        \delta(q_1,\veps,Z_0) &= \{(q_1, \veps)\} 
    \end{align*}
    y el resto de  transiciones son el conjunto vacío.\\

    En el estado $q_0$, vemos que cada $a$ o $b$ va añadiendo una $X$ a la pila. En el estado $q_1$, cuando hay $X$ tan solo se pueden leer $a$'s para eliminar la $X$ de la pila, hasta llegar al símbolo inicial de la pila, que se elimina. Por tanto, el lenguaje aceptado por este autómata por el criterio de pila vacía es:
    \begin{equation*}
        N(M) = \{ua^n\mid n\in \bb{N}\setminus \{0\},~u\in \{a,b\}^{\ast},~|u| = n\}
    \end{equation*}

    La gramática que acepta este lenguaje es:
    \begin{align*}
        G &= (\{S\},\{a,b\},P,S) \\
        P &= \{S\rightarrow aSa\mid bSa\mid aa\mid ba\}
    \end{align*}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.2}
    Construir un autómata con pila que acepte el lenguaje siguiente, indicando si los autómatas son deterministas:
    \begin{equation*}
        \{a^ib^i \mid i\geq 0\} \cup \{a^i \mid i \geq 0\} \cup \{b^i \mid i \geq 0\}
    \end{equation*}
    \begin{enumerate}
        \item Por el criterio de estados finales.
        
        Sea el autómata $M = (\{q_0,q_1,q_2\},\{a,b\},\{Z_0,A,B,X\},\delta,q_0,Z_0,\{q_0\})$. La función de transición $\delta$ la desollaremos poco a poco. En primer lugar, desde la configuración inicial, si leemos una $a$ podríamos estar en alguno de los dos primeros casos, mientras que leyendo una $b$ estaríamos en el tercer caso. Por tanto, las transiciones iniciales son:
        \begin{align*}
            \delta(q_0,a,Z_0) &= \{(q_0,AZ_0), (q_1, XZ_0)\} \\
            \delta(q_0,b,Z_0) &= \{(q_0,BZ_0)\}
        \end{align*}

        Indiquemos ahora las transiciones que se realizan en el estado $q_0$. Además de las iniciales, para los dos últimos casos añadimos:
        \begin{align*}
            \delta(q_0,a,A) &= \{(q_0,A)\} \\
            \delta(q_0,b,B) &= \{(q_0,B)\}
        \end{align*}

        Respecto al primer caso, el estado $q_1$ se leen $a$'s, mientras que en el estado $q_2$ se leen $b$'s. Para controlar que el número sea el mismo, añadimos un símbolo $X$ a la pila por cada $a$ leído y lo eliminamos por cada $b$ leído.
        \begin{align*}
            \delta(q_1,a,X) &= \{(q_1,XX)\} \\
            \delta(q_1,b,X) &= \{(q_2,\veps)\} \\
            \delta(q_2,b,X) &= \{(q_2,\veps)\} \\
            \delta(q_2,\veps,Z_0) &= \{(q_0,\veps)\}
        \end{align*}

        Además, este autómata no es determinista, puesto que:
        \begin{equation*}
            |\delta(q_0,a,Z_0)|=2\geq 1
        \end{equation*}
        \item Por el criterio de pila vacía.
        
        \begin{description}
            \item[Razonándolo de forma directa] Sea el autómata dado por
            $$M = (\{q_0,q_1,q_2\},\{a,b\},\{Z_0,A,B, X\},\delta,q_0,Z_0,\emptyset)$$
            donde la función de transición $\delta$ la desollaremos poco a poco. En primer lugar, desde la configuración inicial, si leemos una $a$ podríamos estar en alguno de los dos primeros casos, mientras que leyendo una $b$ estaríamos en el tercer caso. Por tanto, las transiciones iniciales son:
            \begin{align*}
                \delta(q_0,a,Z_0) &= \{(q_0,A), (q_1, XZ_0)\} \\
                \delta(q_0,b,Z_0) &= \{(q_0,B)\}
            \end{align*}
    
            Indiquemos ahora las transiciones que se realizan en el estado $q_0$ (además de las iniciales), por ser estos los casos más sencillos.
            \begin{align*}
                \delta(q_0,a,A) &= \{(q_0,A), (q_0, \veps)\} \\
                \delta(q_0,b,B) &= \{(q_0,B), (q_0, \veps)\}
            \end{align*}
    
            Respecto al primer caso, el estado $q_1$ se leen $a$'s, mientras que en el estado $q_2$ se leen $b$'s. Para controlar que el número sea el mismo, añadimos un símbolo $X$ a la pila por cada $a$ leído y lo eliminamos por cada $b$ leído.
            \begin{align*}
                \delta(q_1,a,X) &= \{(q_1,XX)\} \\
                \delta(q_1,b,X) &= \{(q_2,\veps)\} \\
                \delta(q_2,b,X) &= \{(q_2,\veps)\} \\
                \delta(q_2,\veps,Z_0) &= \{(q_2,\veps)\}
            \end{align*}
    
            Además, este autómata no es determinista, puesto que:
            \begin{equation*}
                |\delta(q_0,a,Z_0)|=2\geq 1
            \end{equation*}
            
            \item[Razonándolo de forma algorítmitca] Lo obtendremos a partir del anterior empleando el algoritmo para pasar de un autómata con pila por el criterio de estados finales a uno por el criterio de pila vacía. Para ello, añadimos un nuevo estado $q_f$ que será el único estado final y que se alcanzará desde $q_0$ cuando la pila esté vacía. Para ello, sea el autómata $M^n$ dado por:
            \begin{equation*}
                M^n = (\{q_0,q_1,q_2\}\cup \{q_0^n,q_S\},\{a,b\},\{Z_0,A,B,X\}\cup \{Z_0^n\},\delta,q_0^n,Z_0^n,\emptyset)
            \end{equation*}
            donde la función de transición $\delta$ viene dada por las transiciones de $M$ más las siguientes:
            \begin{align*}
                \delta(q_0^n,\veps,Z_0^n) &= \{(q_0,Z_0)\}\\
                \delta(q_0,\veps,H) &= \{(q_S,H)\} \qquad \forall H\in \{Z_0, A,B,X, Z_0^n\}\\
                \delta(q_S,\veps,H) &= \{(q_S,\veps)\} \qquad \forall H\in \{Z_0, A,B,X, Z_0^n\}
            \end{align*}

            Como el autómata $M$ de criterio de estados finales no era determinista, este tampoco lo será.
        \end{description}
    \end{enumerate}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.3}
    Obtener a partir de la gramática $G=(\{S,T\},\{a,b,c,d\},P,S)$, con
    \begin{equation*}
        P = \{S\rightarrow abS,\ S\rightarrow cdT,\ T\rightarrow bT,\ T\rightarrow b\}
    \end{equation*}
    un autómata con pila que acepta por el criterio de estados finales el lenguaje generado por esa gramática.\\

    El lenguaje generado es regular, con expresión regular asociada:
    \begin{equation*}
        (ab)^*~cd~b^+
    \end{equation*}

    Por tanto, puede ser aceptado por un AFD. La extensión a APND es directa, por lo que el autómata es:
    \begin{equation*}
        M=\{\{q_0,\dots,q_4\}, \{a,b,c,d\},\{Z_0\},\delta,q_0,Z_0,\{q_4\}\}
    \end{equation*}
    donde la función de transición $\delta$ viene dada por:
    \begin{align*}
        \delta(q_0,a,Z_0)&=\delta(q_1,Z_0)\\
        \delta(q_1,b,Z_0)&=\delta(q_0,Z_0)\\
        \delta(q_0,c,Z_0)&=\delta(q_2,Z_0)\\
        \delta(q_2,d,Z_0)&=\delta(q_3,Z_0)\\
        \delta(q_3,b,Z_0)&=\delta(q_4,Z_0)\\
        \delta(q_4,b,Z_0)&=\delta(q_4,Z_0)\\
    \end{align*}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.4}
    Demostrar que los siguientes lenguajes son libres del contexto y obtener para cada uno de ellos un autómata con pila no determinista que pueda ser usado como reconocedor:
    \begin{enumerate}
        \item $L_1 = \{a^pb^q \mid p,q\geq 1;\ p>q\}$.
        \begin{description}
            \item[Por Estados Finales] Sea el autómata $M$ siguiente:
            $$M = (\{q_0,q_1,q_2\},\{a,b\},\{Z_0,X\},\delta,q_0,Z_0,\{q_2\})$$
            
            La función de transición $\delta$ viene dada por:
            \begin{align*}
                \delta(q_0,a,Z_0) &= \{(q_0,XZ_0)\} \\
                \delta(q_0,a,X) &= \{(q_0,XX)\} \\
                \delta(q_0,b,X) &= \{(q_1,\veps)\} \\
                \delta(q_1,b,X) &= \{(q_1,\veps)\} \\
                \delta(q_1,\veps,X) &= \{(q_2,\veps)\}
            \end{align*}

            En este caso, en la pila por cada $a$ introducimos una $X$, mientras que por cada $b$ la quitamos. Además, al menos una $X$ se quita sin haber leído una $b$, por lo que al menos hay una $a$ más que $b$.

            \item[Por Pila Vacía] Sea el autómata $M$ siguiente:
            $$M = (\{q_0,q_1,q_2\},\{a,b\},\{Z_0,X\},\delta,q_0,Z_0,\emptyset)$$
            
            La función de transición $\delta$ viene dada por:
            \begin{align*}
                \delta(q_0,a,Z_0) &= \{(q_0,XZ_0)\} \\
                \delta(q_0,a,X) &= \{(q_0,XX)\} \\
                \delta(q_0,b,X) &= \{(q_1,\veps)\} \\
                \delta(q_1,b,X) &= \{(q_1,\veps)\} \\
                \delta(q_1,\veps,X) &= \{(q_2,\veps)\} \\
                \delta(q_2,\veps,X) &= \{(q_2,\veps)\} \\
                \delta(q_2,\veps,Z_0) &= \{(q_2,\veps)\}
            \end{align*}

            En este caso, tan solo sería necesario vaciar la pila en los estados finales para obtener el equivalente con el criterio de pila vacía.
        \end{description}
        \item $L_2 = \{a^pb^q \mid p,q\geq 1;\ p<q\}$.
        \begin{description}
            \item[Por Estados Finales] Sea el autómata $M$ siguiente:
            $$M = (\{q_0,q_1,q_2\},\{a,b\},\{Z_0,X\},\delta,q_0,Z_0,\{q_2\})$$

            La función de transición $\delta$ viene dada por:
            \begin{align*}
                \delta(q_0,a,Z_0) &= \{(q_0,XZ_0)\} \\
                \delta(q_0,a,X) &= \{(q_0,XX)\} \\
                \delta(q_0,b,X) &= \{(q_1,\veps)\} \\
                \delta(q_1,b,X) &= \{(q_1,\veps)\} \\
                \delta(q_1,b,Z_0) &= \{(q_2,Z_0)\}\\
                \delta(q_2,b,Z_0) &= \{(q_2,Z_0)\}
            \end{align*}

            En este caso, en la pila por cada $a$ introducimos una $X$, mientras que por cada $b$ la quitamos. Además, al menos una $b$ se lee tras haber quitado todas las $X$ de la pila, por lo que al menos hay una $b$ más que $a$.

            \item[Por Pila Vacía] En este caso, en vez de pasar a $q_2$, podemos vaciar la pila en $q_1$.
            Sea el autómata $M$ siguiente:
            $$M = (\{q_0,q_1,q_2\},\{a,b\},\{Z_0,X\},\delta,q_0,Z_0,\emptyset)$$

            La función de transición $\delta$ viene dada por:
            \begin{align*}
                \delta(q_0,a,Z_0) &= \{(q_0,XZ_0)\} \\
                \delta(q_0,a,X) &= \{(q_0,XX)\} \\
                \delta(q_0,b,X) &= \{(q_1,\veps)\} \\
                \delta(q_1,b,X) &= \{(q_1,\veps)\} \\
                \delta(q_1,b,Z_0) &= \{(q_1,Z_0),(q_1,\veps)\}
            \end{align*}
        \end{description}
        \item $L_3 = \{a^pb^qa^r \mid p+q\geq r\geq 1\}$.
        
        Hemos de distinguir los casos en los que $q$ o $p$ son $0$. Sea el autómata $M$ por el criterio de pila vacía:
        $$M = (Q\cup \{q_0\},\{a,b\},B\cup \{Z_0\},\delta,q_0,Z_0,\emptyset)$$
        donde, inicialmente, $Q=B=\emptyset$, y la función de transición $\delta$ la iremos dando en cada caso.
        \begin{itemize}
            \item Si $p=0$, entonces $q\geq r\geq 1$. Tenemos que:
            \begin{itemize}
                \item Añadimos $\{q_1\}$ a $Q$.
                \item Añadimos $\{X\}$ a $B$.
            \end{itemize}
            Además, añadimos las siguientes transiciones:
            \begin{align*}
                \delta(q_0,b,Z_0) &= \{(q_0,XZ_0)\} \\
                \delta(q_0,b,X) &= \{(q_0,XX)\} \\
                \delta(q_0,a,X) &= \{(q_1,\veps)\} \\
                \delta(q_1,a,X) &= \{(q_1,\veps)\} \\
                \delta(q_1,\veps,X) &= \{(q_1,\veps)\}\\
                \delta(q_1,\veps,Z_0) &= \{(q_1,\veps)\}
            \end{align*}

            \item Si $q=0$, entonces $L_3=\{a^n\mid n\geq 2\}$, que es un lenguaje regular. Por tanto:
            \begin{itemize}
                \item Añadimos $\{q_2\}$ a $Q$.
            \end{itemize}
            Además, añadimos las siguientes transiciones:
            \begin{align*}
                \delta(q_0,a,Z_0) &= \{(q_2,XZ_0)\} \\
                \delta(q_2,a,X) &= \{(q_2,\veps)\} \\
                \delta(q_2,\veps,Z_0) &= \{(q_2,Z_0),(q_2,\veps)\}
            \end{align*}

            \item Si $p,q\geq 1$, entonces añadimos las siguientes transiciones:
            \begin{align*}
                \delta(q_0,a,Z_0) &= \{(q_0,XZ_0)\} \\
                \delta(q_0,a,X) &= \{(q_0,XX)\}
            \end{align*}
            Además, hemos de usar todas las reglas que introducimos en el caso de $p=0$ a excepción de la primera.
        \end{itemize}
    \end{enumerate}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.5}
    Considera el lenguaje siguiente:
    \begin{equation*}
        L = \{a^ib^jc^{i+j}\mid i,j\in \mathbb{N}\}
    \end{equation*}
    \begin{enumerate}
        \item Haciendo uso de resultados matemáticos concretos, identifica a que tipos de lenguajes NO pertenece $L$.
        
        Demostraremos que este lenguaje no es regular haciendo uso del recíproco del Lema de Bombeo. Para cada $n\in \mathbb{N}$, consideramos la palabra $z=a^nb^nc^{2n}\in L$. Toda descomposición de $z$ en la forma $z=uvw$ con $|uv|\leq n$ y $|v|\geq 1$ ha de cumplir que:
        \begin{equation*}
            u=a^k,\ v=a^l,\ w=a^{n-k-l}b^nc^{2n}\qquad 0\leq k+l\leq n,\ l\geq 1
        \end{equation*}

        Para $i=2$, tenemos que $uv^2w = a^{n+l}b^nc^{2n}\notin L$, ya que:
        \begin{align*}
            n+l+n = 2n\Longleftrightarrow l=0
        \end{align*}
        Pero sabemos que $l\geq 1$, por lo que hemos llegado a una contradicción. Por tanto, por el recíproco del Lema de Bombeo, $L$ no es regular.
        \item Encuentra, si es posible, un reconocedor para las cadenas de ese lenguaje.
        
        Como reconocedor, sea la gramática $G=(\{S,X\},\{a,b,c\},P,S)$, con:
        \begin{align*}
            P &= \left\{
                \begin{aligned}
                    S &\rightarrow aSc\mid X \\
                    X &\rightarrow bXc\mid bc
                \end{aligned}
            \right.
        \end{align*}
    \end{enumerate}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.6}
    Considerar el lenguaje $L$ en el alfabeto $\{0,1\}$ de todas las palabras en las que el número de 0 es el doble que el número de 1.
    \begin{enumerate}
        \item Construir un autómata con pila que, por el criterio de estados finales, acepte el lenguaje $L$.
        
        En este caso, es más sencillo razonarlo por el criterio de la pila vacía, por lo que estableceremos simplemente que cuando la pila contenga el símbolo inicial, podamos ir a un estado final. Sea el autómata $M$ siguiente:
        $$M = (\{q_0,q_1, q_2\},\{0,1\},\{Z_0,X, Y\},\delta,q_0,Z_0,\{q_2\})$$
        Veamos qué significan los estados y los elementos del alfabeto de la pila:
        \begin{itemize}
            \item $Z_0$: Indica que el balance es el correcto; que el número de $0$'s es el doble que el de $1$'s.
            \item $X$: Implica sobrante de $1$'s, y se compensa con un $0$. Por cada $1$ leído, añadimos dos $XX$ a la pila, puesto que ha de compensarse con dos $0$'s. Cada $0$ leído elimina un $X$ de la pila.
            \item $Y$: Implica sobrante de $0$s, y dos $Y$'s se compensan con un $1$. Por cada $0$ leído, añadimos un $Y$ a la pila, puesto que ha de compensarse con un $1$. Cuando se introduzca un $1$, en el caso de que haya dos $Y$'s cosecutivas en la pila, se eliminan sin problema. En el caso de que haya una $Y$ pero no dos, se quita la $Y$ y se añade un $X$ a la pila. Esta distinción se hace mediante el estado $q_1$.
            \item $q_2$: Es el estado final. Cuando en la pila esté el símbolo inicial, se podrá llegar a él.
        \end{itemize}

        Describamos ahora formalmente la función de transición $\delta$. Cuando hay equilibrio (estado $q_0$ y pila con $Z_0$), tenemos que:
        \begin{align*}
            \delta(q_0,1,Z_0) &= \{(q_0,XXZ_0)\} \\
            \delta(q_0,0,Z_0) &= \{(q_0,YZ_0)\}
        \end{align*}

        Veamos qué ocurre cuando no estamos en equilibrio:
        \begin{align*}
            \delta(q_0,1,X) &= \{(q_0,XXX)\} \\
            \delta(q_0,0,X) &= \{(q_0,\veps)\}\\
            \delta(q_0,1,Y) &= \{(q_1,\veps)\} \\
            \delta(q_0,0,Y) &= \{(q_0,YY)\}
        \end{align*}

        El caso a estudiar ahora es el estado $q_1$. Tenemos que:
        \begin{align*}
            \delta(q_1,\veps,Y) &= \{(q_0,\veps)\} \\
            \delta(q_1,\veps,Z_0) &= \{(q_0,XZ_0)\}
        \end{align*}
        Notemos que nunca se va a alcanzar el estado $q_1$ teniendo una $X$ en la pila; puesto que esto implicaría que se ha colocado una $Y$ sobre una $X$, algo que no es posible.

        Finalmente, el estado final $q_2$ se alcanza cuando la pila se puede vaciar:
        \begin{align*}
            \delta(q_0,\veps,Z_0) &= \{(q_2,\veps)\}
        \end{align*}
        \item Construir una gramática libre de contexto en forma normal de Chomsky que genere el mismo lenguaje.
        
        % // TODO: Algoritmo pasar de APND a CFG
    \end{enumerate}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.7}
    Considerar el lenguaje $L$ en el alfabeto $\{a,b\}$ de todas aquellas palabras en las que el número de símbolos $a$ es distinto del número de símbolos $b$.
    \begin{enumerate}
        \item Construir un autómata con pila que acepte dicho lenguaje.
        
        Sea el autómata $M = (\{q_0,q_1\},\{a,b\},\{Z_0,A,B\},\delta,q_0,Z_0,\{q_1\})$ que acepta el lenguaje por el criterio de estados finales.
        Veamos qué representa cada símbolo de la pila:
        \begin{itemize}
            \item $Z_0$: Indica que $N_a(u)=N_b(u)$.
            \item $A$: Indica que $N_a(u)>N_b(u)$.
            \item $B$: Indica que $N_b(u)>N_a(u)$.
        \end{itemize}
        Además, como el estado final es $q_1$, siempre que en la pila haya una $A$ o $B$, se podrá llegar a $q_1$.
        La función de transición $\delta$ viene dada por:
        \begin{align*}
            \delta(q_0,a,Z_0) &= \{(q_0,AZ_0)\} \\
            \delta(q_0,a,A) &= \{(q_0,AA)\} \\
            \delta(q_0,a,B) &= \{(q_0,\veps)\} \\
            \delta(q_0,b,Z_0) &= \{(q_0,BZ_0)\} \\
            \delta(q_0,b,A) &= \{(q_0,\veps)\} \\
            \delta(q_0,b,B) &= \{(q_0,BB)\} \\
            \delta(q_0,\veps,A) &= \{(q_1,\veps)\} \\
            \delta(q_0,\veps,B) &= \{(q_1,\veps)\}
        \end{align*}
        
        
        \item Construir una gramática en forma normal de Chomsky a partir de dicho autómata.
        
        % // TODO: Algoritmo pasar de APND a CFG
    \end{enumerate}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.8}
    Considera el siguiente lenguaje:
    \begin{equation*}
        L = \{a^i b^j c^k a^i \mid i\geq 1,\ j\geq k \geq 1\}
    \end{equation*}
    \begin{enumerate}
        \item Construir un autómata con pila que acepte dicho lenguaje por el criterio de pila vacía.
        
        Sea el autómata $M = (\{q_0,q_1\},\{a,b,c\},\{Z_0,A,X\},\delta,q_0,Z_0,\emptyset)$ que acepta el lenguaje por el criterio de pila vacía.
        La función de transición $\delta$ viene dada por:
        \begin{align*}
            \delta(q_0,a,Z_0) &= \{(q_0,AZ_0)\} \\
            \delta(q_0,a,A) &= \{(q_0,AA)\} \\
            \delta(q_0,b,A) &= \{(q_0,XA)\} \\
            \delta(q_0,b,X) &= \{(q_0,XX)\} \\
            \delta(q_0,c,X) &= \{(q_1,\veps)\} \\
            \delta(q_1,c,X) &= \{(q_1,\veps)\} \\
            \delta(q_1,\veps,X) &= \{(q_1,\veps)\} \\
            \delta(q_1,a,A) &= \{(q_1,\veps)\}\\
            \delta(q_1,\veps,Z_0) &= \{(q_1,\veps)\}
        \end{align*}
        \item Transformar dicho autómata en uno que lo acepte por el criterio de estados finales.
        
        Sea el autómata $M_f = (\{q_0^n, q_0,q_1, q_f\},\{a,b,c\},\{Z_0,A,X, Z_0^n\},\delta,q_0^n,Z_0^n,\{q_f\})$ que acepta el lenguaje por el criterio de estados finales. A las transiciones de $M$ añadimos:
        \begin{align*}
            \delta(q_0^n,\veps,Z_0^n) &= \{(q_0,Z_0Z_0^n)\} \\
            \delta(q_1,\veps,Z_0^n) &= \{(q_f,\veps)\}
        \end{align*}
    \end{enumerate}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.9}
    Construir un autómata con pila que acepte el lenguaje:
    \begin{equation*}
        L = \{a^i b^j c^k d^l \mid i+l = j+k\}
    \end{equation*}

    Sea el autómata $M = (\{q_0, q_1, q_2, q_3, q_4\},\{a,b,c,d\},\{Z_0,X,Y\},\delta,q_0,Z_0,\emptyset)$ que acepta el lenguaje por el criterio de pila vacía.
    La función de transición $\delta$ viene dada por:
    \begin{align*}
        &\delta(q_0,a,Z_0) = \{(q_0,XZ_0)\} \\
        &\delta(q_0,a,X) = \{(q_0,XX)\} \\
        &\red{\delta(q_0,\veps,Z_0) = \{(q_1,Z_0)\} }\\
        &\red{\delta(q_0,\veps,X) = \{(q_1,X)\} }\\
        &\delta(q_1,b,X) = \{(q_1,\veps)\} \\
        &\delta(q_1,b,Z_0) = \{(q_1,YZ_0)\} \\
        &\delta(q_1,b,Y) = \{(q_1,YY)\} \\
        &\red{\delta(q_1,\veps,Z_0) = \{(q_2,Z_0)\}} \\
        &\red{\delta(q_1,\veps,X) = \{(q_2,X)\}} \\
        &\red{\delta(q_1,\veps,Y) = \{(q_2,Y)\} }\\
        &\delta(q_2,c,Y) = \{(q_2,YY)\} \\
        &\delta(q_2,c,Z_0) = \{(q_2,YZ_0)\} \\
        &\delta(q_2,c,X) = \{(q_2,\veps)\} \\
        &\red{\delta(q_2,\veps,Y) = \{(q_3,Y)\} }\\
        &\red{\delta(q_2,\veps,Z_0) = \{(q_3,Z_0)\}} \\
        &\red{\delta(q_2,\veps,X) = \{(q_3,X)\} }\\
        &\delta(q_3,d,Y) = \{(q_3,\veps)\} \\
        &\delta(q_3,d,Z_0) = \{(q_3,XZ_0)\} \\
        &\delta(q_3,d,X) = \{(q_3,XX)\} \\
        &\red{\delta(q_3,\veps,Z_0) = \{(q_4,\veps)\}}
    \end{align*}
    donde las transiciones marcadas en rojo no modifican la pila, sino que tan solo pasan al siguiente estado.
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.10}
    Sea el alfabeto $A = \{0,1\}$ y para $u\in {\{0,1\}}^{\ast}$, sea $\overline{u}$ la palabra obtenida a partir de $u$ cambiando los 0 por 1 y los 1 por 0. Considerar el lenguaje $L = \{u\in {\{0,1\}}^{\ast} \mid u^{-1} = \overline{u}\}$.
    \begin{enumerate}
        \item Dar una gramática en forma normal de Chomsky que acepte $L$.
        
        Sea la gramática $G=(\{S\},\{0,1\},P,S)$, con:
        \begin{align*}
            P &= \left\{
                \begin{aligned}
                    S &\rightarrow 0S1\mid 1S0\mid \veps
                \end{aligned}
            \right.
        \end{align*}

        Aunque $\cc{L}(G)=L$, no es una gramática en forma normal de Chomsky. Para obtener ficha formal, sea $G'=(\{S,C_0,C_1\},\{0,1\},P',S)$, con:
        \begin{align*}
            P' &= \left\{
                \begin{aligned}
                    S &\rightarrow C_0C_1\mid C_1C_0\mid C_0D_1\mid C_1D_0\\
                    D_1 &\rightarrow SC_1\\
                    D_0 &\rightarrow SC_0\\
                    C_0 &\rightarrow 0 \\
                    C_1 &\rightarrow 1
                \end{aligned}
            \right.
        \end{align*}
        \item Dar un autómata con pila que acepte $L$ por el criterio de estados finales.
        
        Partiendo de la gramática $G$ (por tener menos producciones), sea el autómata $M = (\{q\},\{0,1\},\{S,0,1\},\delta,q,S,\emptyset)$ que acepta el lenguaje por el criterio de pila vacía. La función de transición $\delta$ viene dada por:
        \begin{align*}
            \delta(q,\veps, S) &= \{(q,0S1),(q,1S0),(q,\veps)\}\\
            \delta(q,0,0) &= \{(q,\veps)\}\\
            \delta(q,1,1) &= \{(q,\veps)\}
        \end{align*}

        Este autómata acepta el lenguaje por el criterio de pila vacía, pero buscamos uno que lo haga por el criterio de estados finales. Para ello, sea el autómata $M_f = (\{q_0^n, q, q_f\},\{0,1\},\{S,0,1, Z_0^n\},\delta,q_0^n,Z_0^n,\{q_f\})$ que acepta el lenguaje por el criterio de estados finales. A las transiciones de $M$ añadimos:
        \begin{align*}
            \delta(q_0^n,\veps,Z_0^n) &= \{(q,SZ_0^n)\} \\
            \delta(q,\veps,Z_0^n) &= \{(q_f,\veps)\}
        \end{align*}
    \end{enumerate}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.11}
    Considerar el siguiente lenguaje:
    \begin{equation*}
        L = \{0^r 1^s \mid r\leq s \leq 2r\}
    \end{equation*}
    \begin{enumerate}
        \item Construir un autómata con pila que acepte dicho lenguaje.
        
        Cada $0$ introducirá $AB$ en la pila, y cada $1$ solo podrá quitar o $A$ o $B$, de forma que tenemos así asegurado que $s\leq 2r$. Además, todas las $A$'s han de ser quitadas por un $1$, de forma que $r\leq s$. Las $B$'s pueden ser quitadas al leer un $1$ o sin leer nada, de forma que quitando todas son leer nada llegaríamos a $r=s$, mientras que sin quitar ninguna llegaríamos a $s=2r$.

        Sea entonces el autómata $M = (\{q_0,q_1\},\{0,1\},\{Z_0,A,B\},\delta,q_0,Z_0,\emptyset)$ que acepta el lenguaje por el criterio de pila vacía. La función de transición $\delta$ viene dada por:
        \begin{align*}
            &\delta(q_0,0,Z_0) = \{(q_0,ABZ_0)\} \\
            &\delta(q_0,0,A) = \{(q_0,ABA)\} \\
            &\red{\delta(q_0,\veps,A) = \{(q_1,A)\}} \\
            &\red{\delta(q_0,\veps,Z_0) = \{(q_1,Z_0)\}} \\
            &\delta(q_1,1,A) = \{(q_1,\veps)\} \\
            &\delta(q_1,1,B) = \{(q_1,\veps)\} \\
            &\delta(q_1,\veps,B) = \{(q_1,\veps)\}\\
            &\red{\delta(q_1,\veps,Z_0) = \{(q_1,\veps)\}}
        \end{align*}
        \item Construir, a partir de dicho autómata, una gramática libre de contexto que acepte el mismo lenguaje.
        
        % // TODO: Algoritmo pasar de APND a CFG
        \item Eliminar símbolos y producciones inútiles de la gramática.
    \end{enumerate}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.12}
    Construir autómatas con pila que acepten los siguientes lenguajes, siendo estos deterministas en caso de que sea posible.
    \begin{enumerate}
        \item El conjunto de todas las palabras $u$ con el mismo número de síbolos $a$ y $b$, y tal que en todo prefijo el número de símbolos $a$ es menor o igual que el número de símbolos $b$.
        
        Sea el autómata $M = (\{q_0\},\{a,b\},\{Z_0,B\},\delta,q_0,Z_0,\emptyset)$ que acepta el lenguaje por el criterio de pila vacía. Veamos qué representa cada símbolo de la pila:
        \begin{itemize}
            \item $Z_0$: Indica que $N_a(u)=N_b(u)$.
            \item $B$: Indica que $N_a(u)<N_b(u)$.
            \item Notemos que no es necesario un símbolo para indicar que $N_a(u)>N_b(u)$, ya que no en este caso tendríamos un prefijo que no cumple la condición dada.
        \end{itemize}
        Veamos la función de transición $\delta$:
        \begin{align*}
            &\delta(q_0,b,Z_0) = \{(q_0,BZ_0)\} \\
            &\delta(q_0,b,B) = \{(q_0,BB)\} \\
            &\delta(q_0,a,B) = \{(q_0,\veps)\} \\
            &\delta(q_0,\veps,Z_0) = \{(q_0,\veps)\}
        \end{align*}

        % // TODO: Determinista?
        \item $L = \{a^i b^j c^k \mid i=j\ \lor\ j = k\}$.
        
        % // TODO: Autómata para \{a^i b^j c^k \mid i=j\ \lor\ j = k\}. Determinista?
    \end{enumerate}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.13}
    Dado el autómata con pila $M = (\{q_0,q_1\},\{0,1\},\{Z_0,A,B\},\delta,q_0,Z_0,\emptyset )$, donde
    \begin{align*}
        \delta(q_0,0,Z_0) &= \{(q_0,AAZ_0)\}\\
        \delta(q_0,0,A) &= \{(q_0,AAA)\}\\
        \delta(q_0,0,B) &= \{(q_1,\veps)\}\\
        \delta(q_1,\veps,B) &= \{(q_0,\veps)\}\\
        \delta(q_1,\veps,Z_0) &= \{(q_0,A)\}\\
        \delta(q_0,1,Z_0) &= \{(q_0,BZ_0)\}\\
        \delta(q_0,1,A) &= \{(q_0,\veps)\}\\
        \delta(q_0,1,B) &= \{(q_0,BB)\}
    \end{align*}
    Encontrar una gramática libre de contexto que genere el mismo lenguaje que este autómata acepta por el criterio de pila vacía.\\

    Este ejercicio es muy similar al Ejercicio~\ref{ej:1.5.6}, por lo que se recomienda consultarlo antes. El lenguaje aceptado por $M$ por el criterio de pila vacía es:
    \begin{equation*}
        \cc{L}(M)=\{u\in \{0,1\}^\ast \mid N_0(u) = 2N_1(u)\}
    \end{equation*}

    % // TODO: Algoritmo pasar de APND a CFG
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.14}
    Encontrar un autómata con pila que acepte el siguiente lenguaje
    \begin{equation*}
        L_1 = \{uvv^{-1}u^{-1}\mid u,v\in {\{0,1\}}^{\ast}\}
    \end{equation*}

    Sea $L_2=\{ww^{-1}\mid w\in {\{0,1\}}^{\ast}\}$. Veamos por doble inclusión que $L_1=L_2$:
    \begin{description}
        \item[$\subseteq$)] Sea $z\in L_1$. Entonces, $z=uvv^{-1}u^{-1}$ para $u,v\in {\{0,1\}}^{\ast}$. Sea ahora $w=uv$, de forma que $w^{-1}=v^{-1}u^{-1}$. Por tanto, $z=ww^{-1}\in L_2$.
        \item[$\supseteq$)] Sea $z\in L_2$. Entonces, $z=ww^{-1}$ para $w\in {\{0,1\}}^{\ast}$. Tomando $u=w$, $v=\veps$, tenemos que $z=uvv^{-1}u^{-1}\in L_1$.
    \end{description}

    Por tanto, sea el autómata $M = (\{q_0,q_1\},\{0,1\},\{Z_0,0,1\},\delta,q_0,Z_0,\emptyset)$ que acepta el lenguaje por el criterio de pila vacía. La función de transición $\delta$ viene dada por:
    \begin{align*}
        &\delta(q_0,0,Z_0) = \{(q_0,0Z_0)\} \\
        &\delta(q_0,1,Z_0) = \{(q_0,1Z_0)\} \\
        &\delta(q_0,0,0) = \{(q_0,00)\} \\
        &\delta(q_0,1,1) = \{(q_0,11)\} \\
        &\red{\delta(q_0,\veps,Z_0) = \{(q_1,Z_0)\}} \\
        &\red{\delta(q_0,\veps,0) = \{(q_1,0)\}} \\
        &\red{\delta(q_0,\veps,1) = \{(q_1,1)\}} \\
        &\delta(q_1,0,0) = \{(q_1,\veps)\} \\
        &\delta(q_1,1,1) = \{(q_1,\veps)\} \\
        &\red{\delta(q_1,\veps,Z_0) = \{(q_1,\veps)\}}
    \end{align*}

    Tenemos que:
    \begin{equation*}
        \cc{L}(M)=L_2=L_1
    \end{equation*}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.15}
    Construir un autómata con pila determinista que reconozca el lenguaje $L=L_1\cap L_2$ sobre el alfabeto $A = \{0,1,2\}$, donde
    \begin{itemize}
        \item $L_1$ es el conjunto de todas las palabras $u\in A^\ast$ tales que en todo prefijo $u'$ de $u$, la cantidad de símbolos 0 es mayor que la cantidad de 1.
        \item $L_2$ es el lenguaje de todas las palabras sobre $A$ que contienen la subcadena $0102$.
    \end{itemize}

    El lenguaje $L_2$ es regular, por lo que podremos obtener un APND que lo acepte por el criterio de estados finales, sin modificar en ningún momento la pila. El lenguje $L_1$ no es regular, y lo más sencillo en este caso sería obtener un APND que lo acepte por el criterio de pila vacía con un único estado. Por tanto, haremos un APND que acepte $L_1\cap L_2$ por el criterio de pila vacía, gestionando la pila según $L_1$ y los estados según $L_2$. La pila solo se podrá vaciar de forma completa (quitar el símbolo inicial) en el estado final de $L_2$.\\

    Construyamos en primer lugar el AFD que acepta $L_2$, tal y como se ha visto en temas anteriores. Este se encuentra en la Figura~\ref{fig:1.5.15-1}.
    \begin{figure}
        \centering
        \begin{tikzpicture}
            \node[state,initial] (q0) {$q_0$};
            \node[state, right of=q0] (q1) {$q_1$};
            \node[state, right of=q1] (q2) {$q_2$};
            \node[state, right of=q2] (q3) {$q_3$};
            \node[state, accepting, right of=q3] (q4) {$q_4$};
            
            \draw   (q0) edge[above] node{0} (q1)
                    (q1) edge[above] node{1} (q2)
                    (q2) edge[above] node{0} (q3)
                    (q3) edge[above] node{2} (q4);

            % Completamos
            \draw   (q0) edge[loop above] node{1,2} (q0)
                    (q1) edge[loop above] node{0} (q1)
                    (q1) edge[above, bend right] node{2} (q0)
                    (q2) edge[below, bend left] node{1,2} (q0)
                    (q3) edge[above, bend right] node{0} (q1)
                    (q3) edge[below, bend left] node{1} (q2)
                    (q4) edge[loop above] node{0,1,2} (q4);
        \end{tikzpicture}
        \caption{Autómata que acepta $L_2$.}
        \label{fig:1.5.15-1}
    \end{figure}

    Sea ahora el autómata que acepta $L_1\cap L_2$ por el criterio de pila vacía $M$ dado por:
    \begin{equation*}
        M = (\{q_0,\ldots,q_4\},\{0,1,2\},\{Z_0,X\},\delta,q_0,Z_0,\emptyset)
    \end{equation*}
    donde:
    \begin{itemize}
        \item $Z_0$: Indica que $N_0(u)=N_1(u)$.
        \item $X$: Indica que $N_0(u)>N_1(u)$.
        \item No es necesario un símbolo para indicar que $N_0(u)<N_1(u)$, ya que no en este caso tendríamos un prefijo que no cumple la condición dada por $L_1$.
        \item Al leer un $2$ no se verá afectada la pila.
        \item En $q_4$, donde ya habremos leído la subcadena $0102$, se podrá vaciar la pila (tanto las $X$ como el $Z_0$).
    \end{itemize}

    La función de transición $\delta$ viene dada por:
    \begin{equation*}
        \begin{array}{rlcrl}
            \delta(q_0,0,Z_0) &= \{(q_1,XZ_0)\}
            &\qquad& \delta(q_3,0,X) &= \{(q_1,XX)\} \\
            \delta(q_0,1,Z_0) &= \emptyset
            &\qquad& \delta(q_3,1,X) &= \{(q_2,\veps)\} \\
            \delta(q_0,2,Z_0) &= \{(q_0,Z_0)\}
            &\qquad& \delta(q_3,2,X) &= \{(q_4,X)\} \\
            \delta(q_0,i,X) &= \emptyset \qquad i\in\{0,1,2\} & \qquad & \delta(q_3,i,Z_0) &= \emptyset \qquad i\in\{0,1,2\} \\
            \delta(q_1,0,X) &= \{(q_1,XX)\}
            &\qquad& \delta(q_4,0,X) &= \{(q_4,XX)\} \\
            \delta(q_1,1,X) &= \{(q_2,\veps)\}
            &\qquad& \delta(q_4,1,X) &= \{(q_4,\veps)\} \\
            \delta(q_1,2,X) &= \{(q_0,X)\}
            &\qquad& \delta(q_4,2,X) &= \{(q_4,X)\} \\
            \delta(q_1,i,Z_0) &= \emptyset \qquad i\in\{0,1,2\} & \qquad & \delta(q_4,0,Z_0) &= \{(q_4,XZ_0)\} \\
            \delta(q_2,0,X) &= \{(q_3,XX)\} 
            &\qquad& \delta(q_4,1,Z_0) &= \emptyset \\
            \delta(q_2,1,X) &= \{(q_0,\veps)\}
            &\qquad& \delta(q_4,2,Z_0) &= \{(q_4,Z_0)\} \\
            \delta(q_2,2,X) &= \{(q_0,X)\}
            &\qquad& \\
            \delta(q_2,0,Z_0) &= \{(q_3,XZ_0)\}
            &\qquad&  \delta(q_4,\veps,X) &= \{(q_4,\veps)\}\\
            \delta(q_2,1,Z_0) &= \emptyset
            &\qquad& \delta(q_4,\veps,Z_0) &= \{(q_4,\veps)\}\\
            \delta(q_2,2,Z_0) &= \{(q_0,Z_0)\}
        \end{array}
    \end{equation*}
    \begin{comment}
    \begin{align*}
        &\delta(q_0,0,Z_0) = \{(q_1,XZ_0)\} \\
        &\delta(q_0,1,Z_0) = \emptyset \\
        &\delta(q_0,2,Z_0) = \{(q_0,Z_0)\} \\
        &\delta(q_0,i,X) = \emptyset \qquad i\in\{0,1,2\}\\
        &\delta(q_1,0,X) = \{(q_1,XX)\} \\
        &\delta(q_1,1,X) = \{(q_2,\veps)\} \\
        &\delta(q_1,2,X) = \{(q_0,X)\} \\
        &\delta(q_1,i,Z_0) = \emptyset \qquad i\in\{0,1,2\}\\
        &\delta(q_2,0,X) = \{(q_3,XX)\} \\
        &\delta(q_2,1,X) = \{(q_0,\veps)\} \\
        &\delta(q_2,2,X) = \{(q_0,X)\} \\
        &\delta(q_2,0,Z_0) = \{(q_3,XZ_0)\} \\
        &\delta(q_2,1,Z_0) = \emptyset \\
        &\delta(q_2,2,Z_0) = \{(q_0,Z_0)\} \\
        &\delta(q_3,0,X) = \{(q_1, XX)\} \\
        &\delta(q_3,1,X) = \{(q_2,\veps)\} \\
        &\delta(q_3,2,X) = \{(q_4,X)\} \\
        &\delta(q_3,i,Z_0) = \emptyset \qquad i\in\{0,1,2\}\\
        &\delta(q_4,0,X) = \{(q_4,XX)\} \\
        &\delta(q_4,1,X) = \{(q_4,\veps)\} \\
        &\delta(q_4,2,X) = \{(q_4,X)\} \\
        &\delta(q_4,0,Z_0) = \{(q_4,XZ_0)\} \\
        &\delta(q_4,1,Z_0) = \emptyset \\
        &\delta(q_4,2,Z_0) = \{(q_4,Z_0)\} \\
        &\red{\delta(q_4,\veps,Z_0) = \{(q_4,\veps)\}}
    \end{align*}
    \end{comment}
    donde algunos aspectos a tener en cuenta han sido:
    \begin{itemize}
        \item En $q_0$ no se puede tener una $X$ en la pila, puesto que si se tiene una $X$ en la pila, se ha leído un $0$, luego estamos en $q_1$.
        \item En $q_1,q_3$ no se puede tener una $Z_0$ en la pila, puesto que solo se llega a ese estado poniendo una $X$, y ninguna transición que se quede en ese estado quita la $X$ de la pila.
        \item Teniendo un $Z_0$ en la pila no se puede leer un $1$, puesto que no cumpliría la condición de $L_1$.
    \end{itemize}

\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.16}
    Encontrar autómatas con pila para los siguientes lenguajes:
    \begin{itemize}
        \item $L_1 = \{a^i b^j c^k \mid i+k = j,\ i,j,k\geq 0\}$.
        
        Sea el autómata $M = (\{q_0,q_1,q_2\},\{a,b,c\},\{Z_0,A,B\},\delta,q_0,Z_0,\emptyset)$ que acepta el lenguaje por el criterio de pila vacía. La función de transición $\delta$ viene dada por:
        \begin{align*}
            &\delta(q_0,a,Z_0) = \{(q_0,AZ_0)\} \\
            &\delta(q_0,a,A) = \{(q_0,AA)\} \\
            &\red{\delta(q_0,\veps,A) = \{(q_1,A)\}} \\
            &\red{\delta(q_0,\veps,Z_0) = \{(q_1,Z_0)\}} \\
            &\delta(q_1,b,A) = \{(q_1,\veps)\} \\
            &\delta(q_1,b,Z_0) = \{(q_1,BZ_0)\} \\
            &\delta(q_1,b,B) = \{(q_1,BB)\} \\
            &\red{\delta(q_1,\veps,Z_0) = \{(q_2,Z_0)\}} \\
            &\red{\delta(q_1,\veps,A) = \{(q_2,A)\}} \\
            &\red{\delta(q_1,\veps,B) = \{(q_2,B)\}} \\
            &\delta(q_2,c,B) = \{(q_2,\veps)\} \\
            &\delta(q_2,c,Z_0) = \{(q_2,AZ_0)\} \\
            &\delta(q_2,c,A) = \{(q_2,AA)\} \\
            &\red{\delta(q_2,\veps,Z_0) = \{(q_2,\veps)\}}
        \end{align*}

        \item $L = \{0^n 1^m 2^p 0^q 1^n \mid q = p + m,\ m\geq 1,\ n,p,q\geq 0\}$.
        
        Sea el autómata $M = (\{q_0,\ldots,q_4\},\{0,1,2\},\{Z_0,X,Y\},\delta,q_0,Z_0,\emptyset)$ que acepta el lenguaje por el criterio de pila vacía. La función de transición $\delta$ viene dada por:
        \begin{align*}
            &\delta(q_0,0,Z_0) = \{(q_0,XZ_0)\} \\
            &\delta(q_0,0,X) = \{(q_0,XX)\} \\
            &\red{\delta(q_0,1,X) = \{(q_1,YX)\}} \\
            &\red{\delta(q_0,1,Z_0) = \{(q_1,YZ_0)\}} \\
            &\delta(q_1,1,X) = \{(q_1,YX)\} \\
            &\delta(q_1,1,Y) = \{(q_1,YY)\} \\
            &\red{\delta(q_1,\veps,Y) = \{(q_2,Y)\}} \\
            &\delta(q_2,2,Y) = \{(q_2,YY)\} \\
            &\red{\delta(q_2,\veps,Y) = \{(q_3,Y)\}} \\
            &\delta(q_3,0,Y) = \{(q_3,\veps)\} \\
            &\delta(q_3,\veps,X) = \{(q_4,X)\} \\
            &\delta(q_4,1,X) = \{(q_4,\veps)\} \\
            &\red{\delta(q_4,\veps,Z_0) = \{(q_4,\veps)\}}
        \end{align*}

    \end{itemize}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.17}
    Dado el alfabeto $A = \{0,1\}$,
    \begin{enumerate}
        \item Construir un autómata con pila que acepte por el criterio de estados finales el conjunto de palabras con el triple de ceros que de unos.
        
        Sea el autómata $M = (\{q_0,q_1,q_2,q_f\},\{0,1\},\{Z_0,A,B\},\delta,q_0,Z_0,\{q_f\})$ que acepta el lenguaje por el criterio de estados finales. La función de transición $\delta$ viene dada por:
        \begin{align*}
            &\delta(q_0,1,Z_0) = \{(q_0,AAAZ_0)\} \\
            &\delta(q_0,0,Z_0) = \{(q_0,BZ_0)\} \\
            &\delta(q_0,1,A) = \{(q_0,AAAA)\} \\
            &\delta(q_0,0,A) = \{(q_0,\veps)\} \\
            &\delta(q_0,1,B) = \{(q_1,\veps)\} \\
            &\delta(q_0,0,B) = \{(q_0,BB)\} \\
            &\delta(q_1,\veps,B) = \{(q_2,\veps)\} \\
            &\delta(q_1,\veps,Z_0) = \{(q_0,AAZ_0)\} \\
            &\delta(q_2,\veps,B) = \{(q_0,\veps)\} \\
            &\delta(q_2,\veps,Z_0) = \{(q_0,AZ_0)\}\\
            &\red{\delta(q_0,\veps,Z_0) = \{(q_f,Z_0)\}}
        \end{align*}
        \item Construir una gramática independiente del contexto asociada al autómata.
        
        % // TODO: Algoritmo pasar de APND a CFG
    \end{enumerate}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.18}
    Construir autómatas con pila (si es posible, deterministas) que acepten por el criterio de pila vacía los siguientes lenguajes sobre el alfabeto $\{0,1\}$:
    \begin{enumerate}
        \item $L = \{0^n 1^n \mid n\geq 1\} \cup \{0^n 1^{2n}\mid n\geq 1\}$.
        
        Sea el autómata $M = (\{q_0,q_1,q_2\},\{0,1\},\{Z_0,A\},\delta,q_0,Z_0,\emptyset)$ que acepta el lenguaje por el criterio de pila vacía. La función de transición $\delta$ viene dada por:
        \begin{align*}
            &\delta(q_0,0,Z_0) = \{(q_0,AZ_0)\} \\
            &\delta(q_0,0,A) = \{(q_0,AA)\} \\
            &\delta(q_0,1,A) = \{(q_1,\veps), (q_3,\veps)\} \\
            &\delta(q_1,1,A) = \{(q_1,\veps)\} \\
            &\delta(q_2,1,A) = \{(q_3,\veps)\} \\
            &\delta(q_3,\veps,A) = \{(q_2,\veps)\} \\
            &\delta(q_1,\veps,Z_0) = \{(q_2,\veps)\} \\
            &\delta(q_2,\veps,Z_0) = \{(q_2,\veps)\}
        \end{align*}

        % // TODO: Determinista?
        \item $L = \{0^n 1^m 0^m 1^n \mid n,m\geq 1\}$.
        
        Sea el autómata $M = (\{q_0,\ldots,q_3\},\{0,1\},\{Z_0,X,Y\},\delta,q_0,Z_0,\emptyset)$ que acepta el lenguaje por el criterio de pila vacía. La función de transición $\delta$ viene dada por:
        \begin{align*}
            &\delta(q_0,0,Z_0) = \{(q_0,XZ_0)\} \\
            &\delta(q_0,0,X) = \{(q_0,XX)\} \\
            &\delta(q_0,1,X) = \{(q_1,YX)\} \\
            &\delta(q_1,1,Y) = \{(q_1,YY)\} \\
            &\delta(q_1,0,Y) = \{(q_2,\veps)\} \\
            &\delta(q_2,0,Y) = \{(q_2,\veps)\} \\
            &\delta(q_2,1,X) = \{(q_3,\veps)\} \\
            &\delta(q_3,1,X) = \{(q_3,\veps)\} \\
            &\delta(q_3,\veps,Z_0) = \{(q_3,\veps)\}
        \end{align*}

        Como podemos ver, en este caso el autómata es determinista.
    \end{enumerate}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.19}
    Dado el autómata con pila dado por las transiciones ($R$ es el símbolo inicial):
    \begin{equation*}
        \begin{array}{llll}
            &\delta(q_1,0,R) = \{(q_1,BR)\} &\delta(q_1,1,R) = \{(q_1,GR)\} &\delta(q_1,0,B) = \{(q_1,BB)\} \\
            &\delta(q_1,1,B) = \{(q_1,GB)\} &\delta(q_1,0,G) = \{(q_1,BG)\} &\delta(q_1,1,G) = \{(q_1,GG)\} \\
            &\delta(q_1,1,G) = \{(q_2,G)\} &\delta(q_2,0,B) = \{(q_2,\veps)\} &\delta(q_2,2,G) = \{(q_2,\veps)\} \\
            &\delta(q_2,\veps,R) = \{(q_2,\veps)\} &\delta(q_1,\veps,R) = \{(q_2,R)\} &\delta(q_1,\veps,B) = \{(q_2,B)\} \\
            &\delta(q_1,\veps,G) = \{(q_2,G)\} &\delta(q_1,0,R) = \{(q_2,R)\} &\delta(q_1,0,B) = \{(q_2,B)\} \\
            &\delta(q_1,0,G) = \{(q_2,G)\} &\delta(q_1,1,R) = \{(q_2,R)\} &\delta(q_1,1,B) = \{(q_2,B)\} 
        \end{array}
    \end{equation*}
    Construir una gramática independiente del contexto (siguiendo el procedimiento explicado en clase) que acepte el mismo lenguaje. Eliminar símbolos y producciones inútiles.

    % // TODO: Algoritmo pasar de APND a CFG
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.20}
    Construir autómatas con pila (si es posible, deterministas) que acepten por el criterio de estados finales los siguientes lenguajes sobre el alfabeto $\{0,1\}$:
    \begin{enumerate}
        \item $L = \{0^i 1^j \mid j\geq i \geq 1\}$.
        
        Sea el autómata $M = (\{q_0,q_1,q_f\},\{0,1\},\{Z_0,A\},\delta,q_0,Z_0,\{q_f\})$ que acepta el lenguaje por el criterio de estados finales. La función de transición $\delta$ viene dada por:
        \begin{align*}
            &\delta(q_0,0,Z_0) = \{(q_0,AZ_0)\} \\
            &\delta(q_0,0,A) = \{(q_0,AA)\} \\
            &\delta(q_0,1,A) = \{(q_1,\veps)\} \\
            &\delta(q_1,1,A) = \{(q_1,\veps)\} \\
            &\delta(q_1,\veps,Z_0) = \{(q_f,Z_0)\} \\
            &\delta(q_f,1,Z_0) = \{(q_f,Z_0)\}
        \end{align*}
        \item $L = \{0^i 1^j 0^i \mid i,j\geq 1\}\cup \{1^i 0^j 1^i \mid i,j\geq 1\}$
        
        Sea el autómata $M = (\{q_0,q_1,q_2,q_f\},\{0,1\},\{Z_0,X,Y\},\delta,q_0,Z_0,\{q_f\})$ que acepta el lenguaje por el criterio de estados finales. La función de transición $\delta$ viene dada por:
        \begin{align*}
            &\delta(q_0,0,Z_0) = \{(q_0,XZ_0)\} \\
            &\delta(q_0,1,Z_0) = \{(q_0,YZ_0)\} \\
            &\delta(q_0,0,X) = \{(q_0,XX)\} \\
            &\delta(q_0,1,Y) = \{(q_0,YY)\} \\
            &\delta(q_0,1,X) = \{(q_1,X)\} \\
            &\delta(q_0,0,Y) = \{(q_1,Y)\} \\
            &\delta(q_1,1,X) = \{(q_1,X)\} \\
            &\delta(q_1,0,Y) = \{(q_1,Y)\} \\
            &\delta(q_1,0,X) = \{(q_2,\veps)\} \\
            &\delta(q_1,1,Y) = \{(q_2,\veps)\} \\
            &\delta(q_2,0,X) = \{(q_2,\veps)\} \\
            &\delta(q_2,1,Y) = \{(q_2,\veps)\} \\
            &\delta(q_2,\veps,Z_0) = \{(q_f,\veps)\}
        \end{align*}
    \end{enumerate}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.21}
    Construye un autómata con pila determinista por el criterio de estados finales que reconozca el lenguaje:
    \begin{equation*}
        L = \{ucv\mid u,v\in {\{a,b\}}^{+} \text{\ y n$^\circ$ de subcadenas ``}ab \text{'' en\ } u \text{\ es igual al n$^\circ$ subcadenas ``} ba \text{'' en\ }v\}
    \end{equation*}
    ¿Es posible encontrarlo por el criterio de pila vacía?\\

    Sea el autómata $M = (\{q_0,\dots,q_4,q_f\},\{a,b,c\},\{Z_0,X\},\delta,q_0,Z_0,\{q_f\})$ que acepta el lenguaje por el criterio de estados finales.
    La función de transición $\delta$ viene dada por:
    \begin{align*}
        &\delta(q_0,a,Z_0) = \{(q_1,Z_0)\}
        &\delta(q_0,b,Z_0) = \{(q_0,Z_0)\} \\
        &\delta(q_1,a,Z_0) = \{(q_1,Z_0)\} 
        &\delta(q_1,b,Z_0) = \{(q_0,XZ_0)\} \\
        &\delta(q_0,a,X) = \{(q_1,X)\} 
        &\delta(q_0,b,X) = \{(q_0,X)\} \\
        &\delta(q_1,a,X) = \{(q_1,X)\} 
        &\delta(q_1,b,X) = \{(q_0,XX)\} \\
        &\delta(q_0,c,X) = \{(q_2,X)\} 
        &\delta(q_1,c,X) = \{(q_2,X)\} \\
        &\delta(q_2,a,X) = \{(q_2,X)\} 
        &\delta(q_2,b,X) = \{(q_3,X)\} \\
        &\delta(q_3,a,X) = \{(q_2,\veps)\} 
        &\delta(q_3,b,X) = \{(q_3,X)\} \\
        &\delta(q_2,\veps,Z_0) = \{(q_f,Z_0)\} \\
        &\delta(q_f,a,Z_0) = \{(q_f,Z_0)\} 
        &\delta(q_f,b,Z_0) = \{(q_3,Z_0)\} \\
        &\delta(q_3,a,Z_0) = \{(q_2,\veps)\}
        &\delta(q_3,b,Z_0) = \{(q_3,Z_0)\}\\
        &\delta(q_3,\veps,Z_0) = \{(q_f,Z_0)\}
    \end{align*}

    Además, no es posible encontrar un autómata por el criterio de pila vacía, ya que $L$ es aceptado por un autómata determinista por estados finales, y no tiene la propiedad prefijo. Por ejemplo, tomando $z=abcbaa\in L$, tenemos que $u=abcba\in L$ es un prefijo de de $z,u\neq z$ que pertenece al lenguaje. Por tanto, no es posible. 
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.22}
    Sea el lenguaje sobre el alfabeto $A = \{a,b,c,d\}$, dado por las siguientes reglas:
    \begin{enumerate}
        \item $a$ y $b$ son palabras del lenguaje.
        \item Cualquier sucesión no vacía de palabras del lenguaje es una palabra del lenguaje.
        \item Si $u$ es una palabra del lenguaje, entonces $cudd$ es una palabra del lenguaje.
    \end{enumerate}
    Decid de qué tipo es el lenguaje generado. Según sea el tipo del lenguaje, crear un autómata finito minimal o un autómata con pila que lo acepten.

    % // TODO: Hacer
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.23}
    Describir autómatas con pila para los siguientes lenguajes sobre el alfabeto $A = \{a,b,c\}$ (si es posible hacerlos determistas e indicar si se ha conseguido):
    \begin{enumerate}
        \item Palabras de longitud impar con una $b$ en el centro.
        \item $L = \{a^n b^m c^k \mid n = m\ \lor\ n \leq 3\}$.
    \end{enumerate}

    % // TODO: Deterministas?
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.24}
    Supongamos un operador $\otimes$ que puede aparecer en el código de un lenguaje de programación con la siguiente estructura:
    \begin{equation*}
        \otimes(u,v);
    \end{equation*}
    donde
    \begin{itemize}
        \item $u\in {\{0,1\}}^{\ast}$ es una cadena de símbolos binarios que determina:
            \begin{enumerate}
                \item La operación que se ejecutará. Si el número de 0's en la cadena $u$ es igual al números de 1's se realiza una suma, en caso contrario se hace un producto.
                \item El número de operandos de $\otimes$ (número de ocurrencias de la subcadena '$10$' en $u$).
            \end{enumerate}
        \item $v\in {\{a,b,c\}}^{\ast}$ es una cadena donde cada símbolo representa un operando de $\otimes$.
    \end{itemize}
    Construir, si es posible:
    \begin{enumerate}
        \item Un autómata finito determinista que reciba como entrada la cadena $u$ y le indique al ordenador si realiza una suma (estado final) o si realiza un producto (estado no final).
        \item Construir un autómata con pila determinista por el criterio de pila vacía definido sobre el alfabeto de entrada
            \begin{equation*}
                A = \{'\otimes', '(', ')', ',', ';', '0', '1', 'a'\}
            \end{equation*}
            que reciba como entrada una expresión del conjunto
            \begin{equation*}
                \{\otimes(u,v); \mid u\in {\{0,1\}}^{\ast},\ v\in {\{a,b,c\}}^{\ast}\}
            \end{equation*}
            y nos informe si está bien construida sintácticamente (de acuerdo con lo especificado anteriormente) y si el número de operandos es correcto.
    \end{enumerate}

    % // TODO: Hacer
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.25}
    Construir un autómata con pila (si es posible, determinista) que reconozca el siguiente lenguaje:
    \begin{equation*}
        L_1 = \{a^i b^j c^k \mid i = 2j\ \lor\ j = 2k\}
    \end{equation*}

    % // TODO: Determinista?
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.26}
    Considerar el lenguaje $L$ sobre el alfabeto $\{a,b,c,d\}$ definido por:
    \begin{equation*}
        L = \{a^m b^n c^p d^q \mid m+n\geq p+q\}
    \end{equation*}
    \begin{enumerate}
        \item Construye una gramática libre de contexto que genere $L$.
        
        % // TODO: Hacer
        \item Construye un autómata con pila determinista que reconozca las cadenas del anterior lenguaje $L$ por el criterio de estados finales.
    \end{enumerate}
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.27}
    Construye un autómata con pila que acepte el lenguaje sobre el alfabeto $A = \{a,b\}$ de todas aquellas palabras en las que el número de símbolos $a$ es distinto al número de símbolos $b$.\\

    Hecho en el Ejercicio~\ref{ej:1.5.7}.
\end{ejercicio}

\begin{ejercicio}\label{ej:1.5.28}
    Dado el siguiente lenguaje libre de contexto: $$L = \{{(01)}^{i}{(10)}^{j}\mid j\geq i \geq 1\}$$
    \begin{enumerate}
        \item Encuentra una gramática libre de contexto que lo genere.
        
        Sea la gramática $G = (\{S,S'\},\{0,1\},P,S)$ donde $P$ es el conjunto de producciones:
        \begin{align*}
            S & \rightarrow 01S'10\\
            S' & \rightarrow 01S'10 \mid S'10 \mid \varepsilon
        \end{align*}
        \item Transforma la gramática anterior a un autómata con pila que acepte las cadenas del lenguaje $L$ por el criterio de pila vacía.
        
        Sea el autómata $M = (\{q\},\{0,1\},\{0,1,S,S'\},\delta,q,S,\emptyset)$ que acepta el lenguaje por el criterio de pila vacía. La función de transición $\delta$ viene dada por:
        \begin{align*}
            &\delta(q,\veps, S) = \{(q,01S'10)\} \\
            &\delta(q,\veps, S') = \{(q,01S'10), (q,S'10), (q,\veps)\}\\
            &\delta(q,0,0) = \{(q,\veps)\} \\
            &\delta(q,1,1) = \{(q,\veps)\}
        \end{align*}
        \item Transforma el autómata con pila anterior para que acepte las cadenas por el criterio de estados finales.
        
        Sea el autómata $M' = (\{q, q_0^n, q_f\},\{0,1\},\{0,1,S,S', Z_0^n\},\delta,q_0^n,Z_0^n,\{q_f\})$ que acepta el lenguaje por el criterio de estados finales.
        A las transiciones anteriores, añadimos:
        \begin{align*}
            &\delta(q_0^n,\veps, Z_0^n) = \{(q,SZ_0^n)\} \\
            &\delta(q,\veps, Z_0^n) = \{(q_f,\veps)\}
        \end{align*}
        \item Encuentra un autómata con pila determinista que acepte las cadenas del lenguaje $L$ por el criterio de estados finales.
        
        Sea el autómata $M'' = (\{q_0,\dots,q_3,q_f\},\{0,1\},\{Z_0,X\},\delta,q_0,Z_0,\{q_f\})$ que acepta el lenguaje por el criterio de estados finales. La función de transición $\delta$ viene dada por:
        \begin{align*}
            &\delta(q_0,0,Z_0) = \{(q_1,Z_0)\} \\
            &\delta(q_1,1,Z_0) = \{(q_0,XZ_0)\} \\
            &\delta(q_0,0,X) = \{(q_1,X)\} \\
            &\delta(q_1,1,X) = \{(q_0,XX)\} \\
            &\delta(q_0,1,X) = \{(q_3,X)\} \\
            &\delta(q_3,0,X) = \{(q_2,\veps)\} \\
            &\delta(q_2,1,X) = \{(q_3,X)\} \\
            &\delta(q_2,\veps,Z_0) = \{(q_f,Z_0)\} \\
            &\delta(q_f,1,Z_0) = \{(q_3,Z_0)\}\\
            &\delta(q_3,0,Z_0) = \{(q_f,Z_0)\}
        \end{align*}
    \end{enumerate}
\end{ejercicio}

\subsection{Preguntas Tipo Test}
Se pide discutir la veracidad o falsedad de las siguientes afirmaciones:
\begin{enumerate}
    \item La clase de los lenguajes aceptados por los autómatas con pila deterministas es igual a la clase de los lenguajes generados por las gramáticas de tipo 2.
    \item Una palabra es aceptada por un autómata con pila por el criterio de pila vacía si en algún momento, cuando leemos esta palabra, la pila se queda sin ningún símbolo, con independencia de la cantidad de símbolos que hayamos leído de la palabra de entrada.
    \item Un autómata con pila siempre acepta el mismo lenguaje por los criterios de pila vacía y de estados finales.
    \item Todo lenguaje aceptado por un autómata con pila determinista por el criterio de estados finales es también aceptado por una autómata con pila determinista por el criterio de pila vacía.
    \item Para que un autómata con pila sea determinista es suficiente que desde cada configuración se pueda obtener, a lo más, otra configuración en un paso de cálculo.
    \item Si un lenguaje de tipo 2 verifica la propiedad prefijo y es aceptado por un autómata con pila determinista por el criterio de estados finales, entonces también es aceptado por un autómata con pila determinista por el criterio de pila vacía.
    \item Para todo autómata con pila existe otro autómata con pila que acepta el mismo lenguaje y tiene un solo estado.
    \item Si un lenguaje es aceptado por una autómata con pila determinista por el criterio de estados finales, entonces también es aceptado por un autómata con pila determinista por el criterio de pila vacía.
    \item En un autómata con pila determinista no puede haber transiciones nulas.
    \item Si $L$ es independiente del contexto determinista y $\$ \notin L$ entonces $L.\{\$\}$ es aceptado por un autómata con pila determinista por el criterio de pila vacía.
    \item El conjunto de las palabras $\{u0011u^{-1}\mid u\in {\{0,1\}}^{\ast}\}$ es libre del contexto determinista.
    \item En la construcción de una gramática independiente del contexto a partir de un autómata con pila, la variable $[p,X,q]$ genera todas las palabras que llevan al autómata desde el estado $p$ al estado $q$ sustituyendo $X$ por el símbolo inicial de la pila.
    \item En un autómata con pila determinista no puede haber transiciones nulas.
    \item Todo autómata con pila determinista que acepta un lenguaje por pila vacía se puede transformar en otro autómata determinista que acepte el mismo lenguaje por el criterio de estados finales.
    \item Para que un lenguaje independiente del contexto sea determinista ha de verificar la propiedad prefijo.
    \item El lenguaje compuesto por las instrucciones completas del lenguaje SQL cumplen la propiedad prefijo.
    \item En el algoritmo para pasar un autómata con pila a gramática que hemos visto, si el autómata tiene 3 estados, entonces la transición $(p,XYZU) \in \delta(q,\veps, H)$ da lugar a $4^3$ producciones.
    \item El lenguaje $\{0^i 1^k 2^i \mid i,j\geq 0\}$ es independiente del contexto determinista.
    \item Si tenemos un lenguaje $L$ aceptado por un Autómata con Pila por el criterio de estados finales, podemos encontrar otro $AP$ que reconozca $L$ por el criterio de pila vacía.
    \item La propiedad prefijo no tiene ninguna relación con el hecho de que un lenguaje sea aceptado por un autómata con pila determinista por estados finales.
    \item Para toda gramática libre de contexto $G$ siempre se puede encontrar un autómata con pila que acepte el lenguaje generado por $G$.
    \item Si un lenguaje independiente del contexto cumple la propiedad prefijo, entonces puede ser aceptado por un autómata con pila determinista por el criterio de pila vacía.
    \item La descripción instantánea de un autómata con pila nos permite saber el estado activo, lo que queda por leer de la cadena de entrada, lo que se ha consumido de la cadena de entrada y lo que nos queda en la pila.
    \item Un autómata finito determinista se puede convertir en un autómata con pila que acepta el mismo lenguaje por el criterio de pila vacía.
    \item El conjunto de cadenas generado por una gramática libre de contexto en forma normal de Greibach puede ser reconocido por un autómata finito no determinista con transiciones nulas.
    \item Los lenguajes independientes del contexto con la propiedad prefijo son siempre reconocidos por un autómata con pila determinista por el criterio de pila vacía.
    \item Puede existir un lenguaje con pila determinista que no sea aceptado por un autómata con pila determinista por el criterio de estados finales.
    \item Existe un algoritmo para transformar una gramática regular $G$ en un autómata con pila que acepte las cadenas del lenguaje generado por $G$ por el criterio de pila vacía.
    \item Un autómata con pila determinista no puede tener transiciones nulas.
    \item El conjunto de cadenas generadas por una gramática independiente del contexto en forma normal de Chomsky puede ser reconocido por un autómata finito no determinista con transiciones nulas.
    \item Para que un lenguaje sea aceptado por una autómata con pila determinista por el criterio de pila vacía tiene que verificar la propiedad prefijo.
    \item Un autómata finito determinista se puede convertir en un autómata con pila que acepta el mismo lenguaje por el criterio de pila vacía.
    \item Un autómata con pila determinista no puede tener transiciones nulas.
    \item Todo lenguaje aceptado por un automata con pila determinista por el criterio de estados finales es tambien aceptado por un automata con pila determinista por el criterio de pila vacía.
    \item Si tenemos un autómata con pila en el que $(p,\veps)\in \delta(q,a,C)$, entonces para construir una gramática independiente del contexto que genere el mismo lenguaje que acepta el autómata, debemos de añadir la producción $[p,C,q]\rightarrow a$ (según el procedimiento visto en clase).
    \item Para que un autómata con pila sea determinista es necesario que no tenga transiciones nulas.
    \item El lenguaje $L = \{u\in {\{0,1\}}^{\ast} \mid u = u^{-1}\}$ es independiente del contexto, pero no determinista.
\end{enumerate}
