\section{Diferenciabilidad}

\begin{ejercicio}
    Estudiar la continuidad, la diferenciabilidad y la continuidad de las derivadas parciales, de los campos escalares $f, g, h : \bb{R}^2 \to \bb{R}$ definidos de la siguiente forma, donde $U=\bb{R}^2\setminus \{(0,0)\}$:
    \begin{enumerate}
        \item $\displaystyle
            f(x,y)=\frac{x^2y}{x^2 + y^4} \qquad \forall (x,y)\in U
            \hspace{1cm}
            f(0,0)=0$
    
        Sabemos que $U$ es abierto. Como $f_{\big| U}$ es racional, tenemos que $f_{\big|U}\in C^1(U)$. Por tanto por el carácter local de la diferenciabilidad y de la continuidad, en $U$ tenemos que $f$ es diferenciable, luego continua; y sus derivadas parciales son también continuas en todo punto de $U$. Calculémoslas:
        \begin{equation*}
            \del{f}{x} (x,y) = \frac{2xy(x^2+y^4) - 2x^3y}{(x^2+y^4)^2}
            = \frac{2xy^5}{(x^2+y^4)^2} \qquad \forall (x,y)\in U
        \end{equation*}
        \begin{equation*}
            \del{f}{y} (x,y) = \frac{x^2(x^2+y^4) - x^2y\cdot 4y^3}{(x^2+y^4)^2}
            = \frac{x^4 + x^2y^4 -4x^2y^4}{(x^2+y^4)^2} 
            = \frac{x^4 -3x^2y^4}{(x^2+y^4)^2} \qquad \forall (x,y)\in U
        \end{equation*}
    
        Estudiamos ahora la existencia de las derivadas parciales en el origen:
        \begin{gather*}
            \del{f}{x}(0,0) = \lim_{x\to 0}\frac{f(x,0)-f(0,0)}{x-0} = \lim_{x\to 0}\frac{0-0}{x} = \lim_{x\to 0}\frac{0}{x} = 0 \\
            \del{f}{y}(0,0) = \lim_{y\to 0}\frac{f(0,y)-f(0,0)}{y-0} = \lim_{y\to 0}\frac{0-0}{y} = \lim_{y\to 0}\frac{0}{y} = 0
        \end{gather*}

        Por tanto, tenemos que $f$ es parcialmente derivable en $\bb{R}^2$, con $\nabla f(0,0) =~(0,0)$.
    
        Estudiamos ahora la diferenciabilidad en el origen. Para ello, definimos la aplicación $\varphi:U\to \bb{R}$ dada por
        \begin{multline*}
            \varphi(x,y) = \frac{f(x,y)-f(0,0) - (\nabla f(0,0)\mid (x,y))}{\|(x,y)\|} = \frac{f(x,y)}{\|(x,y)\|} = \frac{x^2y}{(x^2+y^4)\sqrt{x^2+y^2}} \qquad\\ \forall (x,y)\in U
        \end{multline*}

        Calculamos el límite radial según la dirección $y=x$:
        \begin{equation*}
            \lim_{x\to 0^+}\varphi(x,x) = \lim_{x\to 0^+} \frac{x^3}{(x^2+x^4)\sqrt{2x^2}}
             = \lim_{x\to 0^+} \frac{1}{(1+x^2)\sqrt{2}} = \frac{1}{\sqrt{2}}
        \end{equation*}

        Por tanto, de tener $\varphi$ límite en el origen (que no lo sabemos), será $\frac{1}{\sqrt{2}}\neq 0$, por lo que $f$ no es diferenciable en el origen. Por tanto, hemos visto que $f$ en diferenciable en $U$.

        Por la condición suficiente de diferenciabilidad, si alguna de las dos derivadas parciales fuese continua en el origen, entonces $f$ sería diferenciable en el origen. Por tanto, las derivadas parciales son continuas en $U$, pero no en el origen.

        Por último, estudiamos la continuidad de $f$ en el origen. Tenemos que:
        \begin{equation*}
            0\leq |f(x,y)| = \left|\frac{x^2y}{x^2+y^4}\right|\leq |y| \qquad \forall (x,y)\in U
        \end{equation*}
        de donde se deduce que $\lim\limits_{(x,y)\to (0,0)} f(x,y) = 0 = f(0,0)$, por lo que $f$ es continua en el origen.

        En resumen, $f$ es continua y parcialmente derivable en $\bb{R}^2$, pero tan solo es diferenciable en $U$. Además, ambas derivadas parciales tan solo son continuas en $U$.
        
        \item $\displaystyle
            g(x,y)=\frac{x^2y^2}{x^2 + y^4} \qquad \forall (x,y)\in U
            \hspace{1cm}
            g(0,0)=0$
    
        Sabemos que $U$ es abierto. Como $g_{\big| U}$ es racional, tenemos que $g_{\big|U}\in C^1(U)$. Por tanto por el carácter local de la diferenciabilidad y de la continuidad, en $U$ tenemos que $g$ es diferenciable, luego continua; y sus derivadas parciales son también continuas en todo punto de $U$. Calculémoslas:
        \begin{equation*}
            \del{g}{x} (x,y) = \frac{2xy^2(x^2+y^4) - 2x^3y^2}{(x^2+y^4)^2}
            = \frac{2xy^6}{(x^2+y^4)^2} \qquad \forall (x,y)\in U
        \end{equation*}
        \begin{multline*}
            \del{g}{y} (x,y) = \frac{2yx^2(x^2+y^4) - x^2y^2\cdot 4y^3}{(x^2+y^4)^2}
            = \frac{2yx^4 + 2x^2y^5 -4x^2y^5}{(x^2+y^4)^2} 
            = \frac{2yx^4 -2x^2y^5}{(x^2+y^4)^2}=\\
            = \frac{2yx^2(x^2-y^4)}{(x^2+y^4)^2} \qquad \forall (x,y)\in U
        \end{multline*}
    
        Estudiamos ahora la existencia de las derivadas parciales en el origen:
        \begin{gather*}
            \del{g}{x}(0,0) = \lim_{x\to 0}\frac{g(x,0)-g(0,0)}{x-0} = \lim_{x\to 0}\frac{0-0}{x} = \lim_{x\to 0}\frac{0}{x} = 0 \\
            \del{g}{y}(0,0) = \lim_{y\to 0}\frac{g(0,y)-g(0,0)}{y-0} = \lim_{y\to 0}\frac{0-0}{y} = \lim_{y\to 0}\frac{0}{y} = 0
        \end{gather*}

        Por tanto, tenemos que $g$ es parcialmente derivable en $\bb{R}^2$, con $\nabla g(0,0) =~(0,0)$.

        Veamos ahora que $\del{g}{y}$ es continua en el origen:
        \begin{equation*}
            0\leq \left|\del{g}{y}(0,0)\right| = \left|\frac{2yx^2(x^2-y^4)}{(x^2+y^4)^2}\right| = |2y|\cdot \left|\frac{x^2}{x^2+y^4}\right| \cdot \left|\frac{x^2-y^4}{x^2+y^4}\right| \leq |2y| \qquad \forall (x,y)\in U
        \end{equation*}
        Por tanto, deducimos que $\lim\limits_{(x,y)\to (0,0)}\del{g}{y}(x,y) = 0 = \del{g}{y}(0,0)$, por lo que $\del{g}{y}$ es continua en el origen.

        Como además la función $g$ es parcialmente derivable en $\bb{R}^2$, tenemos que $g$ es diferenciable en el origen, por lo que $g$ es diferenciable en $\bb{R}$ y, por tanto, continua en $\bb{R}^2$.

        Por último, falta estudiar la continuidad de las derivadas parciales. Ya se ha visto que la derivada parcial respecto de $y$ es continua en $\bb{R}^2$. Veámoslo para la derivada parcial respecto de $x$. Aplicando el cambio de variable $(x,y)=(t^2, t)$, tenemos:
        \begin{equation*}
            \lim_{t\to 0}\del{g}{x}(t^2, t)
            = \lim_{t\to 0}\frac{2t^2t^6}{(t^4+t^4)^2}
            = \lim_{t\to 0}\frac{2t^8}{4t^8} = \frac{1}{2}
        \end{equation*}
        Por tanto, aplicando el Teorema de Cambio de Variable, de tener límite la parcial respecto de $x$ en el origen, este sería $\frac{1}{2}\neq 0 = \del{g}{x}(0,0)$, por lo que $\del{g}{x}$ no es continua en el origen.

        \item $\displaystyle
            h(x,y)=\frac{x^2y^2}{x^2 + y^2} \qquad \forall (x,y)\in U
            \hspace{1cm}
            h(0,0)=0$
    
        Sabemos que $U$ es abierto. Como $h_{\big| U}$ es racional, tenemos que $h_{\big|U}\in C^1(U)$. Por tanto por el carácter local de la diferenciabilidad y de la continuidad, en $U$ tenemos que $h$ es diferenciable, luego continua; y sus derivadas parciales son también continuas en todo punto de $U$. Calculémoslas:
        \begin{equation*}
            \del{h}{x} (x,y) = \frac{2xy^2(x^2+y^2) - 2x^3y^2}{(x^2+y^2)^2}
            = \frac{2xy^4}{(x^2+y^2)^2} \qquad \forall (x,y)\in U
        \end{equation*}
        Por simetría, se tiene directamente que
        \begin{equation*}
            \del{h}{y} (x,y) = \frac{2yx^4}{(x^2+y^2)^2}  \qquad \forall (x,y)\in U
        \end{equation*}
    
        Estudiamos ahora la existencia de las derivadas parciales en el origen:
        \begin{equation*}
            \del{h}{x}(0,0) = \lim_{x\to 0}\frac{h(x,0)-h(0,0)}{x-0} = \lim_{x\to 0}\frac{0-0}{x} = \lim_{x\to 0}\frac{0}{x} = 0
        \end{equation*}
        De nuevo, por simetría, tenemos que:
        \begin{equation*}
            \del{h}{y}(0,0) = 0
        \end{equation*}

        Por tanto, tenemos que $h$ es parcialmente derivable en $\bb{R}^2$, con $\nabla h(0,0) =~(0,0)$.

        Veamos ahora que sus derivadas parciales son continuas en el origen:
        \begin{equation*}
            0\leq \left|\del{h}{x}(0,0)\right| = \left|\frac{2xy^4}{(x^2+y^2)^2}\right| = |2x|\cdot \left|\frac{y^4}{(x^2+y^2)^2}\right| \leq |2x| \qquad \forall (x,y)\in U
        \end{equation*}
        Por tanto, deducimos que $\lim\limits_{(x,y)\to (0,0)}\del{h}{x}(x,y) = 0 = \del{h}{x}(0,0)$, por lo que $\del{h}{x}$ es continua en el origen. Análogamente, también se demuestra que $\del{h}{x}$ en continua en el origen. Por tanto, ambas derivadas parciales son continuas en $\bb{R}^2$

        Por tanto, por la condición suficiente de diferenciabilidad, tenemos que $h$ es diferenciable en el origen, por lo que es continua también en el origen.

        En conclusión, tenemos que $h\in C^1(\bb{R}^2)$.
    \end{enumerate}
\end{ejercicio}


\begin{ejercicio}
    Estudiar la continuidad, la diferenciabilidad y la continuidad de las derivadas parciales, del campo escalar $f:\bb{R}^2\to \bb{R}$ definido por:
    \begin{equation*}
        f(x,y)=\frac{x^3(y-1)^2}{x^2+|y-1|} \quad
        \forall (x,y)\in \bb{R}^2\setminus \{(0,1)\},\qquad f(0,1)=0
    \end{equation*}

    Consideramos $C=\{(x,y)\in \bb{R}^2\mid y=1\}$, que sabemos que es un cerrado por ser la imagen inversa de $\{1\}$ (cerrado) mediante la proyección en la segunda coordenada, que es una función continua. Por tanto, sea $U=\bb{R}^2\setminus C$.
    \begin{observacion}
        Notemos que en este caso no se escoge $U=\bb{R}^2\setminus \{(0,1)\}$, ya que en ese abierto la función $f$ no es de clase 1 por no serlo el valor absoluto.
    \end{observacion}

    Tenemos que $f_{\big| U}\in C^1({U})$; y usando el carácter local de la diferenciabilidad y de la continuidad, tenemos que $f$ es continua y diferenciable en todo punto de $U$. Además, sus derivadas parciales son continuas en todo punto de $U$. En concreto, para todo $(x,y)\in U$, se tiene:
    \begin{equation*}\begin{split}
        \del{f}{x}(x,y)&=
        \frac{3x^2(y-1)^2(x^2+|y-1|)-2x^4(y-1)^2}{(x^2+|y-1|)^2}=\\
        &=
        \frac{x^2(y-1)^2~[3\cdot(x^2+|y-1|)-2x^2]}{(x^2+|y-1|)^2}
        = \frac{x^2(y-1)^2~[3\cdot|y-1|+x^2]}{(x^2+|y-1|)^2} \\ &\\
        \del{f}{y}(x,y)&=
        \frac{2(y-1)x^3(x^2+|y-1|)-x^3(y-1)^{\cancel{2}}\cdot \dfrac{|y-1|}{\cancel{y-1}}}{(x^2+|y-1|)^2} =\\
        &=
        \frac{x^3(y-1)~[2(x^2+|y-1|)-|y-1|~]}{(x^2+|y-1|)^2}
        =
        \frac{x^3(y-1)~[2x^2+|y-1|~]}{(x^2+|y-1|)^2}
    \end{split}\end{equation*}

    Estudiamos ahora para los puntos de $C$. Tenemos que $C=\{(c,1)\mid c\in \bb{R}\}$. Veamos el valor de las derivadas parciales en dichos puntos. Tenemos que $f(x,1)=0$ para todo $x\in \bb{R}$, por lo que:
    \begin{equation*}
        \del{f}{x}(c,1) = \lim_{x\to c}\frac{f(x,1) - f(c,1)}{x-c}
        =\lim_{x\to c}\frac{0 - 0}{x-c} = 0
    \end{equation*}

    Respecto a la segunda derivada parcial, tenemos:
    \begin{equation*}
        \del{f}{y}(c,1) = \lim_{y\to 1}\frac{f(c,y) - f(c,1)}{y-1}
        = \lim_{y\to 1}\frac{\frac{c^3(y-1)^2}{c^2+|y-1|} - 0}{y-1}
        = \lim_{y\to 1}\frac{c^3(y-1)}{c^2+|y-1|} = 0 \qquad \forall c\neq 0
    \end{equation*}
    No obstante, para $c=0$, tenemos que $f(0,y)=0~\forall y\in \bb{R}$; por lo que el resultado anterior también es válido para $c=0$. Por tanto, $f$ es parcialmente derivable en $\bb{R}^2$, y se tiene que $\nabla f(c,1)=(0,0)$ para todo $(c,1)\in C$.

    Veamos ahora que las derivadas parciales de $f$ son continuas en todo punto $(c,1)\in C$.
    \begin{multline*}
        0 \leq \left|\del{f}{x}(x,y)\right|
        = \left|\frac{x^2(y-1)^2~[3\cdot|y-1|+x^2]}{(x^2+|y-1|)^2}\right|
        = \left|\frac{x^2}{x^2+|y-1|}\right|~\left|\frac{[3\cdot |y-1|+x^2]}{x^2+|y-1|}\right| ~(y-1)^2 \stackrel{(\ast)}{\leq} \\
        \stackrel{(\ast)}{\leq} \left|\frac{3~[~|y-1|+x^2]}{x^2+|y-1|}\right| (y-1)^2 =3(y-1)^2
    \end{multline*}
    donde en $(\ast)$ hemos aplicado que $[3\cdot|y-1|+x^2]\leq 3~[~|y-1|+x^2]$, ya que $x^2\geq 0$. Por tanto, se deduce que $\lim\limits_{(x,y)\to (c,1)}\del{f}{x}(x,y) = 0 = \del{f}{x}(c,1)$, por lo que $\del{f}{x}$ es continua en $C$ y, por tanto, lo es en $\bb{R}^2$.

    
    \begin{multline*}
        0 \leq \left|\del{f}{y}(x,y)\right|
        = \left|\frac{x^3(y-1)~[2x^2+|y-1|~]}{(x^2+|y-1|)^2}\right|
        = \left|\frac{x^2}{x^2+|y-1|}\right|~\left|\frac{[2x^2+|y-1|~]}{x^2+|y-1|}\right| ~|x|~|y-1| \stackrel{(\ast\ast)}{\leq} \\
        \stackrel{(\ast\ast)}{\leq} \left|\frac{2~[x^2+|y-1|~]}{x^2+|y-1|}\right| ~|x|~|y-1| = 2~|x|~|y-1|
    \end{multline*}
    donde en $(\ast\ast)$ hemos aplicado que $[2x^2+|y-1|~]\leq 2~[x^2+|y-1|~]$, ya que $|y-1|\geq 0$. Por tanto, se deduce que $\lim\limits_{(x,y)\to (c,1)}\del{f}{y}(x,y) = 0 = \del{f}{y}(c,1)$, por lo que $\del{f}{y}$ es continua en $C$ y, por tanto, lo es en $\bb{R}^2$.

    En conclusión, como las derivadas parciales son continuas en $\bb{R}^2$, tenemos que $f\in C^1(\bb{R}^2)$.
\end{ejercicio}




\begin{ejercicio}
    Probar que el campo escalar $f:\bb{R}^2\to \bb{R}$ definido por:
    \begin{equation*}
        f(x,y)=\frac{x^6(x^2+y^2)}{(y-x^2)^2+x^6} \quad \forall (x,y)\in \bb{R}^2\setminus \{(0,0)\},\hspace{1.5cm} f(0,0)=0
    \end{equation*}
    es diferenciable en $\bb{R}^2$.\\

    Consideramos $U=\bb{R}^2\setminus \{(0,0)\}$, que es un abierto por ser $\{(0,0)\}$ un cerrado. Además, $f_{\big| U}\in C^1({U})$ por ser racional; por lo que por el carácter local de la diferenciabilidad $f$ es diferenciable en todo punto de $U$.

    Como no pide información sobre las derivadas parciales en los puntos de $U$, evitamos calcularlas; ya que a simple vista parecen complejas. Veamos si $f$ es parcialmente derivable en el origen:
    \begin{gather*}
        \del{f}{x}(0,0) = \lim_{x\to 0}\frac{f(x,0)-f(0,0)}{x-0} = \lim_{x\to 0}\frac{f(x,0)}{x} = \lim_{x\to 0}\frac{\frac{x^8}{x^4 + x^6}}{x}
        = \lim_{x\to 0}\frac{x^3}{1 + x^2}= 0 \\
        \del{f}{y}(0,0) = \lim_{y\to 0}\frac{f(0,y)-f(0,0)}{y-0} = \lim_{y\to 0}\frac{0-0}{y} = \lim_{y\to 0}\frac{0}{y} = 0
    \end{gather*}
    Por tanto, tenemos que $f$ es parcialmente derivable en el origen, con $\nabla f(0,0)=~(0,0)$.

    Veamos ahora si $f$ es diferenciable o no en el origen. Para ello, buscamos acotar la función $\varphi:U\to \bb{R}$ dada por:
    \begin{multline*}
        \varphi(x,y) = \frac{f(x,y)-f(0,0) - (\nabla f(0,0)\mid (x,y))}{\|(x,y)\|}
        = \frac{f(x,y)}{\sqrt{x^2+y^2}}
        = \frac{x^6(x^2+y^2)}{[(y-x^2)^2+x^6]\sqrt{x^2+y^2}} =\\
        = \frac{x^6\sqrt{x^2+y^2}}{(y-x^2)^2+x^6} \qquad \forall x\in U
    \end{multline*}

    Tenemos que la acotación es:
    \begin{equation*}
        0\leq |\varphi(x,y)| \leq |\sqrt{x^2+y^2}| \qquad \forall (x,y)\in U
    \end{equation*}
    de lo que se deduce que $\lim\limits_{(x,y)\to (0,0)} \varphi(x,y) = 0$, luego $f$ es diferenciable en el origen. Por tanto, $f$ es diferenciable en $\bb{R}^2$.
\end{ejercicio}


\begin{ejercicio}
    Para cada $n \in \bb{N}$, estudiar la continuidad, la diferenciabilidad y la continuidad de las derivadas parciales del campo escalar $f : \bb{R}^2 \to \bb{R}$ definido por:
    \begin{equation*}
        f(x,y) = (x+y)^n \sen\left(\frac{1}{\sqrt{x^2+y^2}}\right) \quad \forall (x,y) \in \bb{R}^2\setminus\{(0,0)\},\hspace{1cm}
        f(0,0) = 0
    \end{equation*}

    Consideramos $U=\bb{R}^2\setminus\{(0,0)\}$ abierto, y veamos que $f_{\big| U}\in C^1({U})$. Como en la Figura \ref{fig:ComposicionSeno} se ve, el término de la derecha es composición de funciones de clase $C^1$ en sus respectivos dominios; y por la Regla de la Cadena, dicha composición es de clase 1. Veamos cuáles son esas funciones. Tenemos que la aplicación $p:U\to \bb{R}^+$ es polinómica, por lo que es de clase 1. Además, $\sqrt{x}$ es también de clase $1$; por lo que la composición (el denominador) es de clase 1. Además, la función inversa $\frac{1}{x}$ con dominio en $\bb{R}^+$ es de clase 1, por lo que el argumento del seno es de clase 1. Por último, $x \mapsto \sen x$ es de clase 1, y el argumento hemos visto que también; por lo que por la Regla de Cadena, tenemos que la composición es de clase 1.
    \begin{figure}[H]
        \centering
        \shorthandoff{""}
        \begin{tikzcd}
            U \arrow[r, "p"]           & \bb{R}^+ \arrow[r, "\sqrt{x}"] & \bb{R}^+ \arrow[r, "\frac{1}{x}"] & \bb{R}^+ \arrow[r, "\sen(x)"]                & {[0,1]\subset \bb{R}}      \\
            {(x,y)} \arrow[r, maps to] & x^2+y^2 \arrow[r, maps to]     & \sqrt{x^2+y^2} \arrow[r, maps to]  & \dfrac{1}{\sqrt{x^2+y^2}} \arrow[r, maps to] & \sen\left(\dfrac{1}{\sqrt{x^2+y^2}}\right)
        \end{tikzcd}
        \shorthandon{""}
        \caption{Composición del término de la derecha.}
        \label{fig:ComposicionSeno}
    \end{figure}

    Además, el término de la izquierda es polinómico, por lo que es también de clase 1. Por tanto, $f_{\big| U}\in C^1(U)$. Por el carácter local de la continuidad y diferenciabilidad, tenemos que $f$ es continua y diferenciable para todo punto de $U$. Además, sus derivadas parciales son continuas en todo punto de $U$. La parcial respecto de $x$ para todo punto de $U$ es:
    \begin{equation*}\begin{split}
        \del{f}{x} (x,y) &= n(x+y)^{n-1}\sen\left(\dfrac{1}{\sqrt{x^2+y^2}}\right) +(x+y)^n \cos\left(\dfrac{1}{\sqrt{x^2+y^2}}\right)\cdot \frac{-1}{x^2+y^2} \cdot \frac{1}{2\sqrt{x^2+y^2}}\cdot 2x =\\
        &= n(x+y)^{n-1}\sen\left(\dfrac{1}{\sqrt{x^2+y^2}}\right) -(x+y)^n \cos\left(\dfrac{1}{\sqrt{x^2+y^2}}\right)\cdot \frac{x}{(x^2+y^2)^{\frac{3}{2}}}
    \end{split}\end{equation*}

    La derivada parcial respecto de $y$ de $f$ coincide debido a la simetría. Por tanto, calculamos ahora la derivada parcial respecto de $x$ en el origen:
    \begin{equation*}
        \del{f}{x}(0,0) = \lim_{x\to 0} \frac{f(x,0) - f(0,0)}{x-0}
        = \lim_{x\to 0} \frac{x^n \cdot \sen\frac{1}{|x|}}{x}
        = \lim_{x\to 0} x^{n-1} \cdot \sen\frac{1}{|x|}
    \end{equation*}

    \begin{itemize}
        \item \ul{Para $n-1<0 \Longleftrightarrow n<1$}:

        Tenemos que la derivada parcial respecto a $x$ en el origen no está definida (el límite no converge, diverge), por lo que $f$ no es diferenciable en el origen. Además, por la simetría, la derivada parcial respecto a $y$ en el origen tampoco está definida.

        Para estudiar la continuidad de $f$ en el origen, distinguimos casos:
        \begin{itemize}
            \item \ul{Para $n=0$}:
            
            Tenemos que $\displaystyle f(x,y)\sen\left(\frac{1}{\sqrt{x^2+y^2}}\right) \quad \forall (x,y) \in \bb{R}^2\setminus\{(0,0)\}$.

            Como es límite buscado es en el origen, aplicamos el cambio de variable $(x,y)=(t,t)$:
            \begin{equation*}
                \lim_{t\to 0} f(t,t) = \lim_{t\to 0}\sen\left(\frac{1}{\sqrt{2t^2}}\right)
                = \lim_{t\to 0}\sen\left(\frac{1}{\sqrt{2}~|t|}\right)
            \end{equation*}
            Por tanto, este límite no existe, por lo que el límite de $f$ en el origen tampoco existe, implicando que $f$ no es continua en el origen.

            \item \ul{Para $n<0$}:
            
            Como es límite buscado es en el origen, aplicamos el cambio de variable $(x,y)=(t,t)$:
            \begin{equation*}
                \lim_{t\to 0} f(t,t) = \lim_{t\to 0}(2t)^n\sen\left(\frac{1}{\sqrt{2t^2}}\right)
                = \lim_{t\to 0}2^nt^n\sen\left(\frac{1}{\sqrt{2}~|t|}\right)
            \end{equation*}
            Por tanto, este límite no existe (diverge), por lo que el límite de $f$ en el origen tampoco existe, implicando que $f$ no es continua en el origen.
        \end{itemize}

        Por tanto, $f$ es continua, diferenciable y con derivadas parciales continuas tan solo en $U$ para $n<1$.

        \item \ul{Para $n-1=0 \Longleftrightarrow n=1$}:

        Tenemos que la derivada parcial respecto a $x$ en el origen no está definida (el límite no converge), ya que queda:
        \begin{equation*}
            \del{f}{x}(0,0) = \lim_{x\to 0} \sen\frac{1}{|x|}
        \end{equation*}
        
        Por tanto, $f$ no es diferenciable en el origen. Además, por la simetría, la derivada parcial respecto a $y$ en el origen tampoco está definida. Veamos ahora si $f$ es continua en el origen:
        \begin{equation*}
            0\leq |f(x,y)| = \left|(x+y) \sen\left(\frac{1}{\sqrt{x^2+y^2}}\right)\right| \leq x+y
        \end{equation*}
        de lo que se deduce que $\lim\limits_{(x,y)\to (0,0)}f(x,y) = 0 = f(0,0)$, por lo que $f$ es continua en el origen.

        Por tanto, $f$ es continua en $\bb{R}^2$. No obstante, $f$ es diferenciable y con derivadas parciales continuas tan solo en $U$.

        \item \ul{Para $n-1>0 \Longleftrightarrow n>1$}: :
        

        Tenemos que las derivadas parciales en el origen son nulas, por lo que el gradiente es $\nabla f(0,0) = (0,0)$. Estudiamos por tanto la diferenciabilidad. Para ello, definimos la función $\varphi:U\to \bb{R}$ dada por:
        \begin{equation*}\begin{split}
            \varphi(x,y) &= \frac{f(x,y) - f(0,0) - (\nabla f(0,0)\mid (x,y))}{\|(x,y)\|}
            = \frac{f(x,y)}{\|(x,y)\|}
        \end{split}\end{equation*}
        Por facilidad para los cálculos, usamos la norma $1$ en el denominador:
        \begin{equation*}\begin{split}
            \varphi(x,y) &= \frac{(x+y)^n}{|x|+|y|} \sen\left(\frac{1}{\sqrt{x^2+y^2}}\right)
        \end{split}\end{equation*}
        
        Buscamos acotar dicha función. Para todo $(x,y)\in U$, tenemos:
        \begin{multline*}
            0\leq |\varphi(x,y)| = \left|\frac{(x+y)^n}{|x|+|y|} \sen\left(\frac{1}{\sqrt{x^2+y^2}}\right)\right|\leq \left|\frac{(x+y)^n}{|x|+|y|}\right|
            = \frac{\left|(x+y)^n\right|}{|x|+|y|}
            \stackrel{(\ast)}{\leq}\\\stackrel{(\ast)}{\leq}
            \frac{\left|(x+y)^n\right|}{|x+y|} = |(x+y)^{n-1}|
        \end{multline*}
        donde, como $n>1$, se deduce que $\lim\limits_{(x,y)\to (0,0)} \varphi(x,y) = 0$. Además, en $(\ast)$ hemos usado la desigualdad triangular.
        
        Entonces, $f$ es diferenciable, y por tanto continua, en el origen. Tan solo falta por ver si las derivadas parciales son continuas en el origen 
        Para ello, calculamos el límite radial en el origen en coordenadas cartesianas:
        \begin{equation*}
            \begin{split}
                \lim_{x\to 0^+}\del{f}{x}(x,x)
                &= \lim_{x\to 0^+}  n(2x)^{n-1}\sen\left(\dfrac{1}{\sqrt{2}x}\right) -(2x)^n \cos\left(\dfrac{1}{\sqrt{2}x}\right)\cdot \frac{x}{(2x^2)^{\frac{3}{2}}} =\\
                &= \lim_{x\to 0^+}  n(2x)^{n-1}\sen\left(\dfrac{1}{\sqrt{2}x}\right) -2^n \cos\left(\dfrac{1}{\sqrt{2}x}\right)\cdot \frac{x^{n+1}}{2^{\frac{3}{2}}x^3}
                =\\
                &= \lim_{x\to 0^+}  n(2x)^{n-1}\sen\left(\dfrac{1}{\sqrt{2}x}\right) -2^{n-\frac{3}{2}} \cos\left(\dfrac{1}{\sqrt{2}x}\right)\cdot x^{n-2}
            \end{split}
        \end{equation*}

        \begin{itemize}
            \item \ul{Para $n=2$}:
            \begin{equation*}
                \begin{split}
                    \lim_{x\to 0^+}\del{f}{x}(x,x)= \lim_{x\to 0^+}  4x\sen\left(\dfrac{1}{\sqrt{2}x}\right) -\sqrt{2} \cos\left(\dfrac{1}{\sqrt{2}x}\right)
                \end{split}
            \end{equation*}

            Tenemos que, para $n=2$, ese límite no converge; ya que no lo hace el coseno. Por tanto, la derivada parcial respecto a $x$ (y por simetría también respecto a $y$) no son continuas en el origen. Por tanto, ambas derivadas parciales son continuas tan solo en $U$.

            \item \ul{Para $n>2$}:

            La derivada parcial respecto a $x$ en coordenadas polares es:
            \begin{equation*}\begin{split}
                \del{f}{x} &(\rho\cos\theta,\rho\sen\theta) = n\rho^{n-1} [\cos\theta +\sen\theta]^{n-1}\sen\dfrac{1}{|\rho|}  -\rho^{n} [\cos\theta +\sen\theta]^{n} \cos\dfrac{1}{|\rho|}\cdot \frac{\rho\cos\theta}{\rho^{2}|\rho|} =\\&
                = \rho^{n-1} [\cos\theta +\sen\theta]^{n-1}\left[n\sen\dfrac{1}{|\rho|}  -\rho [\cos\theta +\sen\theta] \cos\dfrac{1}{|\rho|}\cdot \frac{\rho\cos\theta}{\rho^2|\rho|}\right] =\\&
                = \rho^{n-1} [\cos\theta +\sen\theta]^{n-1}\left[n\sen\dfrac{1}{|\rho|}  -\frac{1}{|\rho|} [\cos\theta +\sen\theta] \cos\theta\cos\dfrac{1}{|\rho|}\right]
            \end{split}\end{equation*}

            Acotamos dicha función:
            \begin{equation*}\begin{split}
                0\leq &\left|\del{f}{x}(\rho\cos\theta,\rho\sen\theta)\right|
                =\\&= \left|\rho^{n-1}\right|\cdot \left|[\cos\theta +\sen\theta]^{n-1}\right|\cdot \left|n\sen\dfrac{1}{|\rho|}  -\frac{1}{|\rho|} [\cos\theta +\sen\theta] \cos\theta\cos\dfrac{1}{|\rho|}\right|
                \stackrel{(\ast)}{\leq}\\&\stackrel{(\ast)}{\leq}
                \left|\rho^{n-1}\right|\cdot \left|[\cos\theta +\sen\theta]^{n-1}\right|\cdot \left[\left|n\sen\dfrac{1}{|\rho|}\right|  +\left|\frac{1}{|\rho|} [\cos\theta +\sen\theta] \cos\theta\cos\dfrac{1}{|\rho|}\right|\right]
                \leq \\&\leq
                \left|\rho^{n-1}\right|\cdot 2^{n-1}\cdot \left[n  +\frac{2}{|\rho|}\right]
                = \left|\rho^{n-2}\right|\cdot 2^{n-1}\cdot \left[n|\rho|  +2\right]
            \end{split}\end{equation*}
            donde en $(\ast)$ hemos usado que $|b-c|\leq |b| + |-c| = |b| + |c|$ para todo $b,c\in \bb{R}$. Como $n\geq 2$, tenemos que $\lim\limits_{\rho\to 0}\left|\rho^{n-2}\right|\cdot 2^{n-1}\cdot \left[n|\rho|  +2\right] = 0$. Por tanto, tenemos que:
            \begin{equation*}
                \lim_{(x,y)\to (0,0)}\del{f}{x}(x,y) = 0 = \lim_{(x,y)\to (0,0)}\del{f}{y}(x,y)
            \end{equation*}

            Por tanto, tenemos que $f\in C^1(\bb{R}^2)$.
        \end{itemize}
    \end{itemize}
\end{ejercicio}

\begin{ejercicio}
    Para cada $ \alpha \in \bb{R}^+$, estudiar la continuidad, la diferenciabilidad y la continuidad de las derivadas parciales del campo escalar $f: \bb{R}^2 \to \bb{R}$ definido por 
    \begin{equation*}
        f(x,y) = \frac{|x|^{\alpha}}{x^2 + y^2} \quad \forall (x,y) \in \bb{R}^2\setminus\{(0,0)\}, \hspace{1cm}   f(0,0) = 0
    \end{equation*}

    \begin{comment}

    Sea $C=\{(x,y)\in \bb{R}^2\mid x=0\}$. Tenemos que es un cerrado, por lo que $U=\bb{R}^2\setminus C$ es un abierto. Tenemos que $f_{\big| U}$ es cociente de dos funciones. El denominador es polinómica, por lo que es de clase $1$. El numerador es una composición del valor absoluto (que es de clase $1$ en $U$), con la potencia de orden positivo, que es de clase $1$ en $\bb{R}^+$. Por tanto, $f_{\big| U}$ es de clase $1$. Por el carácter local de la derivabilidad y la continuidad, tenemos que $f$ es continua y diferenciable en todo punto de $U$. Además, sus derivadas parciales son continuas en todo punto de $U$, siendo estas en todo $(x,y)\in U$:
    \begin{gather*}
        \del{f}{x}(x,y) = \frac{\alpha|x|^{\alpha-1}\cdot \frac{x}{|x|}\cdot (x^2+y^2) - |x|^\alpha(2x)}{(x^2+y^2)^2}
        = \frac{\alpha x\cdot |x|^{\alpha-2}\cdot (x^2+y^2) - |x|^\alpha(2x)}{(x^2+y^2)^2} \\
        \del{f}{y}(x,y) = \frac{-2y|x|^\alpha}{(x^2+y^2)^2}
    \end{gather*}

    Buscamos ahora saber el valor de las derivadas parciales en todo punto de $C$. Sabemos que $C=\{(0,c) \mid c\in \bb{R}\}$. Por facilidad, calculamos en primer lugar la derivada parcial respecto de $y$.
    \begin{equation*}
        \del{f}{y}(0,c) = \lim_{y\to c} \frac{f(0,y) - f(0,c)}{y-c}
        = \lim_{y\to c} \frac{0-0}{y-c} = 0
    \end{equation*}
    donde he empleado que $f(0,y)=0 \qquad \forall y\in \bb{R}$.

    A partir de ahora, estudiamos el origen por separado:
    \begin{enumerate}
        \item \ul{Para $c\neq 0$}:

        Veamos ahora el valor de la derivada parcial respecto de $x$:
        \begin{equation*}
            \del{f}{x}(0,c) = \lim_{x\to 0} \frac{f(x,c) - f(0,c)}{x-0}
            = \lim_{x\to 0} \frac{|x|^\alpha}{x(x^2+c^2)}
            = \lim_{x\to 0} \frac{|x|}{x}\cdot \frac{|x|^{\alpha-1}}{x^2+c^2}
        \end{equation*}
    
        \begin{enumerate}
            \item \ul{Para $\alpha<1$}:
            
            Tenemos que el límite en cuestión visto diverge, por lo que no existe la derivada parcial respecto de $x$ en $(0,c)$, con $c\neq 0$.
    
            Por tanto, no existe la derivada parcial de $x$ para ningún valor de $(0,c)\in C\setminus \{(0,0)\}$.
            Es decir, $f$ no es diferenciable $(0,c)\in C\setminus \{(0,0)\}$. Su derivada parcial respecto de $x$ tampoco está definida en $C\setminus \{(0,0)\}$.
    
            Estudiamos ahora la continuidad de la derivada parcial respecto de $y$ en los puntos $(0,c)$, con $c\neq 0$.
            Para ello, calculamos el límite radial en el origen en coordenadas cartesianas:

            \item \ul{Para $\alpha=1$}:
            
            Tenemos que el límite en cuestión n converge, ya que converge a valores distintos según sea el límite lateral derecho o izquierdo. Por tanto, no existe la derivada parcial respecto de $x$ no está definida en $(0,c)$, con $c\neq 0$.
    
            Por tanto, no existe la derivada parcial de $x$ para ningún valor de $(0,c)\in C\setminus \{0,0\}$. Es decir, $f$ no es diferenciable $(0,c)\in C\setminus \{0,0\}$. Su derivada parcial respecto de $x$ tampoco está definida en $C\setminus \{0,0\}$.
    
            TERMINAR
    
            \item \ul{Para $1<\alpha$}:
    
            Tenemos que el límite en cuestión converge a 0, por lo que $\del{f}{x}(0,c)=0$. Por tanto, Tenemos que para $c\neq 0$ se tiene $\nabla f(0,c) = (0,0)$. Estudiemos la diferenciabilidad de $f$ en dichos puntos. Sea $\varphi:U\to \bb{R}$ dado por:
            \begin{equation*}
                \varphi(x,y)=  \frac{f(x,y) - f(0,c) - ((0,0)\mid (x,y-c))}{\|(x,y-c)\|}
                =  \frac{f(x,y) - f(0,c)}{|x| + |y-c|}
            \end{equation*}
        \end{enumerate}
    \end{enumerate}
\end{comment}
\end{ejercicio}


\begin{ejercicio}
    Estudiar la continuidad, la diferenciabilidad y la continuidad de las derivadas parciales del campo escalar $f: \bb{R}^3 \to \bb{R}$ definido por
    \begin{equation*}
        f(x,y,z)= \frac{xyz}{\sqrt{x^2 + y^2 + z^2}} \quad \forall (x,y,z) \in \bb{R}^3\setminus\{(0,0, 0)\}, \hspace{1cm}   f(0,0, 0) = 0
    \end{equation*}

    Sea $U=\bb{R}^3\setminus \{(0,0,0)\}$. Tenemos que $U$ es un abierto, y veamos que $f_{\big| U}\in C^1({U})$. El numerador es polinómica, por lo que es de clase 1. El denominador es una composición de una polinómica con la raíz cuadrada, que es de clase $1$ en $\bb{R}^+$. Por tanto, tenemos que $f_{\big| U}$ es cociente de dos funciones de clase 1, por lo que $f_{\big| U}\in C^1({U})$. Por el carácter local de la diferenciabilidad y de la continuidad, tenemos que $f$ es continua y diferenciable en todo punto de $U$. Además, sus derivadas parciales son continuas en todo punto de $U$, siendo estas:
    \begin{equation*}
        \del{f}{x}f(x,y,z) = \frac{yz\sqrt{x^2+y^2+z^2} - \frac{x^2yz}{\sqrt{x^2+y^2+z^2}}}{x^2+y^2+z^2}
        = \frac{yz(x^2+y^2+z^2) - x^2yz}{(x^2+y^2+z^2)^{\frac{3}{2}}} \qquad \forall (x,y,z)\in U
    \end{equation*}

    Además, por la simetría notemos que todas las derivadas parciales coinciden. Calculemos ahora el valor de las derivadas parciales en el origen:
    \begin{equation*}
        \del{f}{x}f(0,0,0) = \lim_{x\to 0} \frac{f(x,0,0) - f(0,0,0)}{x-0} = \lim_{x\to 0} \frac{0-0}{x} = 0
    \end{equation*}
    De nuevo, por simetría, tenemos que todas las derivadas parciales en el origen coinciden. Veamos que la derivada parcial respecto de $x$ es continua en el origen. Para todo $(x,y,z)\in U$, se tiene:
    \begin{equation*}\begin{split}
        0\leq \left|\del{f}{x}f(x,y,z)\right| &= \left|\frac{yz(x^2+y^2+z^2) - x^2yz}{(x^2+y^2+z^2)^{\frac{3}{2}}}\right| \leq \left|\frac{yz(x^2+y^2+z^2)}{(x^2+y^2+z^2)^{\frac{3}{2}}}\right|+\left|\frac{x^2yz}{(x^2+y^2+z^2)^{\frac{3}{2}}}\right| =\\&
        = \left|\frac{yz}{\sqrt{x^2+y^2+z^2}}\right|+\left|\frac{x^2yz}{(x^2+y^2+z^2)\sqrt{x^2+y^2+z^2}}\right| =\\&
        = \left|\frac{yz}{\sqrt{x^2+y^2+z^2}}\right|+\left|\frac{x^2}{(x^2+y^2+z^2)}\right|~\left|\frac{yz}{\sqrt{x^2+y^2+z^2}}\right| \leq |z| + |z|
    \end{split}\end{equation*}
    Por tanto, tenemos que:
    \begin{equation*}
        \lim_{(x,y,z)\to (0,0,0)} \del{f}{x}f(x,y,z) = 0 = \del{f}{x}f(0,0,0)
    \end{equation*}
    Por tanto, $\del{f}{x}$ es continua en $\bb{R}^3$, y análogamente se tiene que lo son el resto de derivadas parciales. Por tanto, queda directamente demostrado que $f\in C^1(\bb{R}^3)$.
\end{ejercicio}

\begin{ejercicio}[Prueba DGIIM 2023-24]
    Estudiar la continuidad, la diferenciabilidad y la continuidad de las derivadas parciales del campo escalar $f: \bb{R}^2 \to \bb{R}$ definido por:
    \begin{equation*}
        f(x,y)=(x^2+y^2)\cos\left(\frac{1}{x^2+y^2}\right) \quad \forall (x,y)\in \bb{R}^2\setminus \{(0,0)\},\qquad\qquad f(0,0)=0
    \end{equation*}

    Sea el conjunto $U=\bb{R}^2\setminus \{(0,0)\}\in \mathcal{T}_u$. El primer término es polinómico, por lo que es de clase $C^1(U)$.
    El segundo término es composición del coseno, que es de clase $C^1(\bb{R})$, con una función racional, que es de clase $C^1(U)$.
    Como la composición de funciones de clase $C^1$ es de clase $C^1$, tenemos que el segundo término es de clase $C^1(U)$.
    Como el producto de funciones de clase $C^1$ es de clase $C^1$, tenemos que $f_{\big| U}\in C^1(U)$.
    Por el carácter local de la continuidad y la diferenciabilidad, tenemos que $f$ es continua y diferenciable en todo punto de $U$. Además, sus derivadas parciales son continuas en todo punto de $U$, siendo estas:
    \begin{gather*}
        \del{f}{x}(x,y) = 2x\cos\left(\frac{1}{x^2+y^2}\right) + \frac{2x}{x^2+y^2}\sen\left(\frac{1}{x^2+y^2}\right) \qquad \forall (x,y)\in U \\
    \end{gather*}
    Por simetría, como $f(x,y)=f(y,x)$, tenemos que $\deld{f}{x}(y,x)=\deld{f}{y}(x,y)$. Calculamos ahora el valor de las derivadas parciales en el origen:
    \begin{equation*}
        \del{f}{x}(0,0) = \lim_{x\to 0} \frac{f(x,0) - f(0,0)}{x-0} = \lim_{x\to 0} \frac{x^2\cos\frac{1}{x^2}}{x} = \lim_{x\to 0} x\cos\frac{1}{x^2} = 0
    \end{equation*}
    Por simetría, tenemos que $\del{f}{y}(0,0)=0$. Por tanto, tenemos que $f$ es parcialmente derivable en el origen, con
    $\nabla f(0,0) = (0,0)$. Veamos ahora si $f$ es diferenciable en el origen. Para ello, definimos la función $\varphi:U\to \bb{R}$ dada por:
    \begin{equation*}
        \varphi(x,y) = \frac{f(x,y) - f(0,0) - (\nabla f(0,0)\mid (x,y))}{\|(x,y)\|}
        = \frac{f(x,y)}{\|(x,y)\|} = \frac{(x^2+y^2)\cos\left(\frac{1}{x^2+y^2}\right)}{\sqrt{x^2+y^2}}
    \end{equation*}

    Veamos que $\varphi$ está acotada. Para todo $(x,y)\in U$, tenemos:
    \begin{equation*}\begin{split}
        0\leq |\varphi(x,y)| &=
        \left|\frac{(x^2+y^2)\cos\left(\frac{1}{x^2+y^2}\right)}{\sqrt{x^2+y^2}}\right|
        = \left|\sqrt{x^2+y^2}\cos\left(\frac{1}{x^2+y^2}\right)\right| \leq \sqrt{x^2+y^2}
    \end{split}\end{equation*}

    Como $\lim\limits_{(x,y)\to (0,0)} \sqrt{x^2+y^2} = 0$, tenemos que $\lim\limits_{(x,y)\to (0,0)} \varphi(x,y) = 0$. Por tanto, $f$ es diferenciable en el origen, y por tanto continua en el origen.
    Veamos ahora si las derivadas parciales son continuas en el origen. Para ello, consideramos dos sucesiones de puntos de $U$ que convergen al origen. Tomamos:
    \begin{equation*}
        \{x_n\}_{n\in \bb{N}} = \left\{\frac{1}{\sqrt{2\pi\cdot n}}\right\}_{n\in \bb{N}} \qquad \{x_n'\}_{n\in \bb{N}} = \left\{\frac{1}{\sqrt{2\pi\cdot n + 1}}\right\}_{n\in \bb{N}}
    \end{equation*}
    Es directo ver que $\{x_n\}\to 0$ y $\{x_n'\}\to 0$. Además, sabemos que:
    \begin{equation*}
        \del{f}{x}(x,0) = 2x\cos\left(\frac{1}{x^2}\right) + \frac{2x}{x^2}\sen\left(\frac{1}{x^2}\right) = 2x\cos\left(\frac{1}{x^2}\right) + \frac{2}{x}\sen\left(\frac{1}{x^2}\right)
    \end{equation*}
    
    Veamos ahora que $\left\{\deld{f}{x}(x,y)\right\}_{n\in \bb{N}}$ no es continua en el origen. Para ello, tenemos que:
    \begin{gather*}
        \del{f}{x}(x_n,0) = 2x_n\cos\left(\frac{1}{x_n^2}\right) + \frac{2}{x_n}\sen\left(\frac{1}{x_n^2}\right)
        = 2x_n\cdot 1 + \frac{2}{x_n}\cdot 0 = 2x_n \\
        \del{f}{x}(x_n',0) = 2x_n'\cos\left(\frac{1}{(x_n')^2}\right) + \frac{2}{x_n'}\sen\left(\frac{1}{(x_n')^2}\right)
        = 2x_n' \cos(1) + \frac{2}{x_n'}\sen(1)
    \end{gather*}

    Por tanto,
    \begin{gather*}
        \left\{\del{f}{x}(x_n,0)\right\} =  \left\{2x_n\right\} \to 0 \\
        \left\{\del{f}{x}(x_n',0)\right\} = \left\{2x_n' \cos(1) + \frac{2}{x_n'}\sen(1)\right\} \to 0 + \sen 1 \cdot \infty = \infty
    \end{gather*}

    Es decir, tenemos que $\deld{f}{x}$ no es continua en el origen, ya que para dos sucesiones distintas de puntos de $U$ que convergen al origen,
    tenemos que las sucesiones de valores de $\deld{f}{x}$ no convergen al mismo valor. Por tanto, $\deld{f}{x}$ no es continua en el origen, y por simetría, tampoco lo es $\deld{f}{y}$ en el origen.
    Por tanto, $f$ es diferenciable en el origen, pero sus derivadas parciales no son continuas en el origen.

    En resumen, tenemos que $f$ es continua y diferenciable en $\bb{R}^2$, pero sus derivadas parciales no son continuas en el origen.
\end{ejercicio}



\begin{ejercicio}[Ordinaria DGIIM 2022-23]
    Probar que la función $f: \bb{R}^2 \to \bb{R}$ definida por
    \begin{equation*}
        f(x,y) = \frac{xy-\sen(xy)}{(x^2+y^2)^2}
        \qquad \forall (x,y) \in \bb{R}^2\setminus\{(0,0)\}, \hspace{1cm}   f(0,0) = 0
    \end{equation*}
    es de clase $C^1$ en $\bb{R}^2$.\\

    Sea $U=\bb{R}^2\setminus \{(0,0)\}$.
    Tenemos que $U$ es un abierto, y veamos que la restricción $f_{\big| U}\in C^1({U})$.
    El numerador es la diferencia de una funión polinómica, luego de clase $C^1(\bb{R}^2)$, con la composición de la misma polinómica con el seno, que es de clase $C^1(\bb{R})$. Por tanto, el numerador es de clase $C^1(\bb{R}^2)$.
    El numerador es polinómica, por lo que es de clase $C^1(\bb{R}^2)$. Por tanto, $f_{\big| U}$ es el cociente de dos funciones de clase $C^1(\bb{R}^2)$, por lo que $f_{\big| U}\in C^1({U})$.
    Además, las derivadas parciales de $f$ son continuas en todo punto de $U$, siendo estas para todo $(x,y)\in U$:
    \begin{align*}
        \del{f}{x}(x,y) &= \frac{(y-y\cos(xy))(x^2+y^2)^2 - 4x(x^2+y^2)(xy-\sen(xy))}{(x^2+y^2)^4} =\\
        &= \frac{y(1-\cos(xy))(x^2+y^2) - 4x(xy-\sen(xy))}{(x^2+y^2)^3} =\\
        &= \frac{y(1-\cos(xy))}{(x^2+y^2)^2} - \frac{4x(xy-\sen(xy))}{(x^2+y^2)^3}
    \end{align*}

    Además, como $f(x,y)=f(y,x)$, por simetría tenemos que:
    \begin{equation*}
        \del{f}{y}(x,y) = \del{f}{x}(y,x) \qquad \forall (x,y)\in U
    \end{equation*}


    Trabajamos ahora en el origen. Calculamos el valor de las derivadas parciales en el origen. Para ello, tenemos que:
    \begin{equation*}
        \del{f}{x}(x,0) = \frac{0}{(x^2)^2} - \frac{4x(0-0)}{(x^2)^3} = 0-0=0 \qquad \forall x\in \bb{R}^\ast
    \end{equation*}

    Por tanto, tenemos que:
    \begin{equation*}
        \del{f}{x}(0,0) = \lim_{x\to 0} \frac{f(x,0)-f(0,0)}{x-0} = \lim_{x\to 0} \frac{0-0}{x} = 0
    \end{equation*}

    Como el enunciado nos pide demostrar que es de clase $C^1(\bb{R}^2)$, ya sabemos que es continua y diferenciable en el origen. Para probar lo buscado, hemos de demostrar que sus derivadas parciales son continuas en el origen. Es decir,
    tenemos que ver que:
    \begin{equation*}
        \lim_{(x,y)\to (0,0)} \del{f}{x}(x,y) = 0 = \del{f}{x}(0,0)
    \end{equation*}

    Buscamos entonces acotar la función $\del{f}{x}$ con una función que tienda a $0$ cuando $(x,y)\to (0,0)$.

    Por la regla de L'Hôpital, tenemos que:
    \begin{equation*}
        \lim_{x\to 0} \frac{1-\cos t}{t^2}
        = \lim_{x\to 0} \frac{\sen t}{2t}
        = \lim_{x\to 0} \frac{\cos t}{2} = \frac{1}{2}
    \end{equation*}

    Por tanto, definiendo $\varphi:\bb{R} \to \bb{R}$ dada por:
    \begin{equation*}
        \varphi(t) = \frac{1-\cos(t)}{t^2} \qquad \forall t\in \bb{R}^\ast \hspace{2cm} \varphi(t) = \frac{1}{2}
    \end{equation*}
    tenemos que $\varphi$ es continua en el origen, y por tanto verifica:
    \begin{equation*}
        t^2\varphi(t) = 1-\cos(t) \qquad \forall t\in \bb{R}
    \end{equation*}

    De forma análoga, por la regla de L'Hôpital, tenemos que:
    \begin{equation*}
        \lim_{t\to 0} \frac{t-\sen t}{t^3}
        = \lim_{t\to 0} \frac{1-\cos t}{3t^2} = \frac{1}{6}
    \end{equation*}

    Por tanto, definiendo $\psi:\bb{R} \to \bb{R}$ dada por:
    \begin{equation*}
        \psi(t) = \frac{t-\sen(t)}{t^3} \qquad \forall t\in \bb{R}^\ast \hspace{2cm} \psi(t) = \frac{1}{6}
    \end{equation*}
    tenemos que $\psi$ es continua en el origen, y por tanto verifica:
    \begin{equation*}
        t^3\psi(t) = t-\sen(t) \qquad \forall t\in \bb{R}
    \end{equation*}

    Tomando $t=xy$ para $(x,y)\in U$, tenemos que:
    \begin{equation*}
        \del{f}{x}(x,y)
        = \frac{y\cdot x^2y^2\varphi(xy)}{(x^2+y^2)^2}
        - \frac{4x\cdot x^3y^3\psi(xy)}{(x^2+y^2)^3}
    \end{equation*}

    Por tanto, usando que $x^2\leq x^2+y^2$ e $y^2\leq x^2+y^2$, tenemos que:
    \begin{align*}
        0& \leq \left|\del{f}{x}(x,y)\right|
        = \left|\frac{y\cdot x^2y^2\varphi(xy)}{(x^2+y^2)^2}
        - \frac{4x\cdot x^3y^3\psi(xy)}{(x^2+y^2)^3}\right| \leq \\&\leq
        \left|\frac{y\cdot x^2y^2\varphi(xy)}{(x^2+y^2)^2}\right|
        + \left|\frac{4x\cdot x^3y^3\psi(xy)}{(x^2+y^2)^3}\right| \leq \\&\leq
        \left|y\cdot \varphi(xy)\right| + \left|4y\cdot \psi(xy)\right|
    \end{align*}

    Por el Teorema de Cambio de variable, como $(x,y)\to (0,0)$ si $t\to 0$ y $(x,y)\neq (0,0)$ si $t\neq 0$, tenemos que:
    \begin{equation*}
        \lim_{(x,y)\to (0,0)} \varphi(xy) = \lim_{t\to 0} \varphi(t) = \frac{1}{2} \hspace{2cm}
        \lim_{(x,y)\to (0,0)} \psi(xy) = \lim_{t\to 0} \psi(t) = \frac{1}{6}
    \end{equation*}

    Por tanto, tenemos que:
    \begin{equation*}
        \lim_{(x,y)\to (0,0)} \left|y\cdot \varphi(xy)\right|
        \left|4y\cdot \psi(xy)\right|
        = 0\cdot \frac{1}{2} + 0\cdot \frac{1}{6} = 0
    \end{equation*}

    Y, como es una acotación de $\deld{f}{x}(x,y)$ que tiende a $0$, tenemos lo buscadoo:
    $$\lim\limits_{(x,y)\to (0,0)} \deld{f}{x}(x,y) = 0 = \deld{f}{x}(0,0)$$

    Por tanto, la derivada parcial de $f$ respecto de $x$ es también continua en el origen.
    Por simetría, tenemos que la derivada parcial de $f$ respecto de $y$ es continua en el origen.

    Por tanto, como $f$ es parcialmente diferenciable, con derivadas parciales continuas en $\bb{R}^2$, tenemos que $f\in C^1(\bb{R}^2)$.
\end{ejercicio}