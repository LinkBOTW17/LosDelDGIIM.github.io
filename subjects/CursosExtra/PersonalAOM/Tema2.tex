\section{Lógica de Primer Orden}

\begin{ejercicio}\label{ej:2.1}
    Prueba que $\{\forall x(P(x) \rightarrow Q(x)), \neg Q(a)\} \models \neg P(a)$.\\

    Sea $(\veps,v)$ una $\cc{L}$-interpretación, verificando:
    \begin{align*}
        I^v(\forall x(P(x) \rightarrow Q(x))) &= 1,\\
        I^v(\neg Q(a)) &= 1.
    \end{align*}

    Por hipótesis, $I^v(\forall x(P(x) \rightarrow Q(x))) =~1$. En particular, para $a$ tenemos:
    \begin{multline*}
        1 = I^{v(x\mid a)}(P(x) \rightarrow Q(x))
        = 1+I^{v(x\mid a)}(P(x))+I^{v(x\mid a)}(Q(x))=1+P(a)+Q(a)
        \Longrightarrow \\ \Longrightarrow P(a) = Q(a).
    \end{multline*}
    
    
    Por otro lado, tenemos:
    \begin{align*}
        1 = I^v(\neg Q(a)) &= 1+I^v(Q(a))\Longrightarrow I^v(Q(a)) = 0
        = Q(v(a)) = Q(a)
    \end{align*}

    Por tanto:
    \begin{align*}
        I^v(\neg P(a)) &= 1+I^v(P(a)) = 1+P(v(a)) = 1+P(a) = 1+Q(a) = 1.
    \end{align*}

    Por tanto, $\{\forall x(P(x) \rightarrow Q(x)), \neg Q(a)\} \models \neg P(a)$.
\end{ejercicio}

\begin{ejercicio}\label{ej:2.2}
    Dada $\cc{U}$ una $\cc{L}$-estructura y $\varphi$ una sentencia, razona si equivalen el que $\varphi$ sea satisfacible y que sea válida en $\cc{U}$
    \begin{observacion}
        Usar el lema de coincidencia.
    \end{observacion}

    Demostraremos por doble implicación:
    \begin{itemize}
        \item[$\Longrightarrow)$] Supongamos que $\varphi$ es satisfacible en $\cc{U}$. Entonces existe una $\cc{L}$-interpretación $(\veps,v)$ tal que $I^v(\varphi) = 1$. No obstante, por tratarse de una sentencia, y usando el lema de coincidencia, tenemos que:
        \begin{equation*}
            1 = I^v(\varphi) = I^{w}(\varphi)
        \end{equation*}
        para cualquier otra $\cc{L}$-interpretación $(\veps,w)$. Por tanto, $\varphi$ es válida en $\cc{U}$.

        \item[$\Longleftarrow)$] Supongamos que $\varphi$ es válida en $\cc{U}$. Entonces para cualquier $\cc{L}$-interpretación $(\veps,w)$, tenemos que $I^v(\varphi) = 1$. En particular existe una $\cc{L}$-interpretación $(\veps,v)$ tal que $I^v(\varphi) = 1$. Por tanto, $\varphi$ es satisfacible en $\cc{U}$.
    \end{itemize}
\end{ejercicio}

\begin{ejercicio}\label{ej:2.3}
    Usando el Ejercicio~\ref{ej:2.2}, y bajo las mismas hipótesis, prueba que o bien $\varphi$ es válida o bien lo es $\neg \varphi$, pero no se pueden dar las dos posibilidades.\\

    Sea ahora una $\cc{L}-$interpretación $(\cc{U},v)$. Hay dos posibilidades:
    \begin{itemize}
        \item \ul{$I^v(\varphi) = 1$}. Entonces, $\varphi$ es satisfacible en $\cc{U}$, y el Ejercicio~\ref{ej:2.2} $\varphi$ es válida en $\cc{U}$. Por tanto, $\neg \varphi$ no es válida en $\cc{U}$.
        
        \item \ul{$I^v(\varphi) = 0$}. Entonces, $\neg \varphi$ es satisfacible en $\cc{U}$, y el Ejercicio~\ref{ej:2.2} $\neg \varphi$ es válida en $\cc{U}$. Por tanto, $\varphi$ no es válida en $\cc{U}$.
    \end{itemize}
\end{ejercicio}

\begin{ejercicio}\label{ej:2.4}
    Sea $\cc{U}$ una $\cc{L}$-estructura. Sea $\varphi \in Form(\cc{L})$. Si $x_1, \ldots, x_n$ son todas las variables de $\varphi$ con alguna ocurrencia libre, entonces equivalen:
    \begin{enumerate}
        \item $\varphi$ es válida en $\cc{U}$,
        \item $\forall x_1 \ldots \forall x_n \varphi$ es satisfacible en $\cc{U}$,
        \item $\forall x_1 \ldots \forall x_n \varphi$ es válida en $\cc{U}$.
    \end{enumerate}

    Demostraremos distintas implicaciones:
    \begin{itemize}
        \item[$(2)\Longleftrightarrow(3)$] $\forall x_1 \ldots \forall x_n \varphi$ es una sentencia, ya que estamos cuantificando todas las variables libres de $\varphi$. Por tanto, por el Ejercicio~\ref{ej:2.2}, se tiene la equivalencia.
    \end{itemize}

    % // TODO: Completar demostración
\end{ejercicio}

\begin{comment}
\setcounter{ejercicio}{4}
\begin{ejercicio}\label{ej:2.5}
    Sea $\cc{U}$ una $\cc{L}$-estructura. Sea $\varphi \in Form(\cc{L})$. Si $x_1, \ldots, x_n$ son todas las variables de $\varphi$ con alguna ocurrencia libre, entonces equivalen:
    \begin{enumerate}
        \item $\varphi$ es satisfacible en $\cc{U}$,
        \item $\exists x_1 \ldots \exists x_n \varphi$ es satisfacible en $\cc{U}$.
    \end{enumerate}
    ¿Es también cierta la equivalencia cambiando en el segundo apartado satisfacible por válida?
\end{ejercicio}
\end{comment}

\setcounter{ejercicio}{5}
\begin{ejercicio}\label{ej:2.6}
    Demuestra que:
    \begin{enumerate}
        \item $\models \neg \forall x \psi \leftrightarrow \exists x \neg \psi$,
        
        Sea $(\veps,v)$ una $\cc{L}$-interpretación. Por definición:
        \begin{align*}
            1 = I^v(\exists x \neg \psi)
            &\iff \exists a\in D,\qquad I^{v(x\mid a)}(\neg \psi) = 1\\
            &\iff \exists a\in D,\qquad 1+I^{v(x\mid a)}(\psi) = 1\\
            &\iff \exists a\in D,\qquad I^{v(x\mid a)}(\psi) = 0\\\\
            1 = I^v(\neg \forall x \psi)
            &\iff 1+I^v(\forall x \psi) = 1\\
            &\iff I^{v}( \forall x \psi) = 0\\
            &\iff \exists a\in D,\qquad I^{v(x\mid a)}(\psi) = 0.
        \end{align*}

        Por tanto, y puesto que trabajamos en $\bb{Z}_2$, hemos probado que:
        \begin{equation*}
            I^v(\neg \forall x \psi) =I^v(\exists x \neg \psi).
        \end{equation*}

        Por tanto:
        \begin{align*}
            I( \neg \forall x \psi \leftrightarrow \exists x \neg \psi)
            &= 1+I(\neg \forall x \psi)+I(\exists x \neg \psi)=1
        \end{align*}
        \item $\models \neg \exists x \psi \leftrightarrow \forall x \neg \psi$,
        
        Sea $(\veps,v)$ una $\cc{L}$-interpretación. Por definición:
        \begin{align*}
            1 = I^v(\forall x \neg \psi)
            &\iff \forall a\in D,\qquad I^{v(x\mid a)}(\neg \psi) = 1\\
            &\iff \forall a\in D,\qquad 1+I^{v(x\mid a)}(\psi) = 1\\
            &\iff \forall a\in D,\qquad I^{v(x\mid a)}(\psi) = 0\\\\
            1 = I^v(\neg \exists x \psi)
            &\iff 1+I^v(\exists x \psi) = 1\\
            &\iff I^{v}( \exists x \psi) = 0\\
            &\iff \forall a\in D,\qquad I^{v(x\mid a)}(\psi) = 0.
        \end{align*}

        Por tanto, y puesto que trabajamos en $\bb{Z}_2$, hemos probado que:
        \begin{equation*}
            I^v(\neg \exists x \psi) =I^v(\forall x \neg \psi).
        \end{equation*}

        Por tanto:
        \begin{align*}
            I( \neg \exists x \psi \leftrightarrow \forall x \neg \psi)
            &= 1+I(\neg \exists x \psi)+I(\forall x \neg \psi)=1
        \end{align*}
        \item $\models \exists x \psi \leftrightarrow \neg \forall x \neg \psi$,
        \item $\models \forall x \psi \leftrightarrow \neg \exists x \neg \psi$,
        \item $\models \forall x \psi \wedge \varphi \leftrightarrow \forall x(\psi \wedge \varphi)$, si $x$ no aparece libre en $\varphi$,
        \item $\models \exists x \psi \wedge \varphi \leftrightarrow \exists x(\psi \wedge \varphi)$, si $x$ no aparece libre en $\varphi$,
        \item $\models \forall x \psi \vee \varphi \leftrightarrow \forall x(\psi \vee \varphi)$, si $x$ no aparece libre en $\varphi$,
        \item $\models \exists x \psi \vee \varphi \leftrightarrow \exists x(\psi \vee \varphi)$, si $x$ no aparece libre en $\varphi$,
        \item $\models \forall x \psi \wedge \forall x \varphi \leftrightarrow \forall x(\psi \wedge \varphi)$,
        \item $\models \exists x \psi \vee \exists x \varphi \leftrightarrow \exists x(\psi \vee \varphi)$,
        \item $\models \forall x \varphi(x) \leftrightarrow \forall y \varphi(y)$, $y$ variable que no aparece en $\forall x \varphi(x)$,
        \item $\models \exists x \varphi(x) \leftrightarrow \exists y \varphi(y)$, $y$ variable que no aparece en $\forall x \varphi(x)$.
    \end{enumerate}
\end{ejercicio}

\begin{comment}
\setcounter{ejercicio}{6}
\begin{ejercicio}\label{ej:2.7}
    Demuestra que $\not\models \forall x(\psi \vee \varphi) \rightarrow (\forall x \psi \vee \forall x \varphi)$.
\end{ejercicio}
\end{comment}

\begin{comment}
\setcounter{ejercicio}{7}
\begin{ejercicio}\label{ej:2.8}
    $\models \forall x(\psi \rightarrow \varphi) \rightarrow (\exists x \psi \rightarrow \exists x \varphi)$.
\end{ejercicio}
\end{comment}

\begin{comment}
\setcounter{ejercicio}{8}
\begin{ejercicio}\label{ej:2.9}
    $\models \exists x(\psi \rightarrow \varphi) \rightarrow (\forall x \psi \rightarrow \varphi)$, supuesto que $x$ no aparece libre en $\varphi$ (pista: intenta probar $\{\neg \varphi, \forall x \psi\} \models \forall x \neg (\psi \rightarrow \varphi)$).
\end{ejercicio}
\end{comment}

\begin{comment}
\setcounter{ejercicio}{9}
\begin{ejercicio}\label{ej:2.10}
    $\models \neg \forall x \psi \rightarrow \exists x \neg \psi$.
\end{ejercicio}
\end{comment}

\begin{comment}
\setcounter{ejercicio}{10}
\begin{ejercicio}\label{ej:2.11}
    Si $x$ no aparece libre en $\psi$, $\models (\forall x \varphi \rightarrow \psi) \rightarrow \exists x(\varphi \rightarrow \psi)$.
\end{ejercicio}
\end{comment}